---
title: "Hire Ed: Job Market Dynamics for Tenure-Track Faculty Positions in Archaeology"
author:
  - Ben Marwick:
      correspondence: "yes"
      email: bmarwick@uw.edu
      orcid: 0000-0001-7879-4531
      institute:
        - uw
  - Anne Marie Poole:
      institute: uw
      orcid: xxx
  - Ailin Zhang:
      institute: uw
      orcid: xxx
  - Setareh Shafizadeh:
      orcid: 0000-0003-2231-4310
      institute: uw
  - Jess Beck:
      orcid: 0000-0002-7387-2307
      institute:
        - ucd
institute:
  - uw: Department of Anthropology, University of Washington, Seattle, USA
  - ucd: School of Archaeology, University College Dublin, Ireland
  
title-block-published: "Last updated"  
date: now
date-format: long
format: 
  docx:
    reference-doc: "../templates/template.docx" # Insert path for the DOCX file
execute:
  echo: false
  warning: false
  message: false
  comment: "#>"
  fig-path: "../figures/"
  fig-dpi: 1000
filters:
  - ../templates/scholarly-metadata.lua
  - ../templates/author-info-blocks.lua
  - ../templates/pagebreak.lua
bibliography: references.bib
csl: "../templates/society-for-american-archaeology.csl" # Insert path for the bib-style
abstract: |
  Many archaeology graduate students pursue advanced degrees in the hope of undertaking an academic career. Job listing websites often serve as the first port-of-call for students  seeking academic positions. We examined tenure-track job advertisements over the past decade to gain insights into the academic job market for archaeologists. Using data from the community-edited Academic Jobs Wiki for Archaeology, we examine changes in the academic job market over time. We analyzed the text of 431 job ads posted from 2013--2023. Our analysis addresses the question of how  archaeological topics, methods, and geographic regions specified in archaeological job ads shifted over time. We also investigate whether the labor burden for applicants has changed over time: do institutions request more information and documents from applicants at the initial stages of application, compared to a decade ago? We assess the influence of socio-political factors on the changing focus of research topics in the field. This research aims to assist current and future archaeology students, graduates, and advisors to better understand the dynamics of the academic job market and the requirements of employers.
keywords: |
  archaeology; hiring; academia; job ads 
---

Keywords: `r rmarkdown::metadata$keywords`

<!-- The actual document text starts here: -->

```{=html}
<!-- Instructors to authors for AAQ 

https://documents.saa.org/container/docs/default-source/doc-publications/style-guide/saa-style-guide_english_updated_2021_final08023c15928949dabd02faafb269fb1c.pdf?sfvrsn=c1f41c1b_11

"AAQ recommends 10,000 words for ARTICLES... Total word count includes
the title page, abstracts (English and second language), keywords (English and second language), text, acknowledgments, funding statements, statements of data availability and competing interests, lists of online supplemental material, figure and table captions, text of all tables (for Excel tables, copy and paste into a Word document to check the word count), notes, and the references cited section"

Our notes document: https://docs.google.com/document/d/12FNfuAPIdZPBlKTEZK_HEWM8GwR_ZHyS/edit Ailin: https://docs.google.com/document/d/13OzXGFdZFraEb60ZXGwMUcRxCRKZxAQG/edit & https://docs.google.com/document/d/1NUF6dD8EnStlM6OameVvI9v6ehtf9IpWNt5SCYZgHPQ/edit

Our SAA poster: Poole et al. https://osf.io/p5uzg & https://docs.google.com/presentation/d/1bljiJiE_JmywxRCaUGh4NkkcaMnQNh2uIBUcmxlp-yw/edit#slide=id.g26d90de87be_2_0

Our URS23 poster: Zhang et al. https://docs.google.com/presentation/d/1u9OGBJNRilNBXAsysiY3z4Q5_qOQa4fxxzBfVlZnQYk/edit#slide=id.g2d1d7d9d51d_0_0 

-->
```

```{r}
#| label: get-data

library(tidyverse)
library(here)
library(ggbeeswarm)
library(flextable)
library(rvest)
# This CSV file was downloaded from our data sheet here
# https://docs.google.com/spreadsheets/d/1Jwe3UqJyedrV-QWlwR_44__t4xBVrCfxGyhXdi3E0sg/edit?resourcekey#gid=1686084773
# note that you may need to download it again to get the latest updates!

jobdata <- read_csv(here::here('analysis/data/raw_data/Tenure Track Job Advertisements in Archaeology (Responses) - Form Responses 1.csv')) %>% 
  # simplify the column names 
  janitor::clean_names()

total_number_of_ads_in_our_sample <- nrow(jobdata) # 550

# for text on our figures
base_size <- 12

n_jobs_mentioning_gender <- 
jobdata %>% 
  select(topical_focus_of_position) %>% 
      filter(str_detect(topical_focus_of_position, 
                        "gender")) %>% 
  nrow()
```

```{r}
#| label: fig-how-many-jobs-per-year

# we can get the year from the URL to the Academic Job Ads Wiki

year_ad_posted_vec <- 
jobdata %>% 
  pull(url_to_data_source_e_g_paste_in_url_to_the_jobs_wiki_page) %>% 
  str_extract(.,  "[[0-9]]{4}-[[0-9]]{4}|2021-22") %>% 
  str_replace("2021-22",  "2021-2022") 

jobdata <- 
  jobdata %>% 
  mutate(year_ad_posted = year_ad_posted_vec) %>% 
  drop_na(year_ad_posted) 

```

```{r}
#| label: fig-how-many-jobs-per-year-by-rank

# how many jobs of each rank per year?

jobdata <-
jobdata %>%
  # simplify rank descriptions
  mutate(title_of_position_tenure_track_jobs_only = tolower(title_of_position_tenure_track_jobs_only)) %>%
  mutate(job_title_simple = case_when(
   str_detect(title_of_position_tenure_track_jobs_only,
              "assistant prof|asst. prof|asst prof") ~ "Assistant Professor",
   str_detect(title_of_position_tenure_track_jobs_only,
              "associate prof|assoc. prof") ~ "Associate Professor",
   str_detect(title_of_position_tenure_track_jobs_only,
              "full prof") ~ "Full Professor",
   str_detect(title_of_position_tenure_track_jobs_only,
              "assistant or associate prof|assistant/associate prof") ~ "Assistant or Associate Professor",
   str_detect(title_of_position_tenure_track_jobs_only,
              "open rank|open-rank|assistant, associate, or full prof|assistant prof, associate prof, or prof") ~ "Open Rank",
   .default = "Other (Curator, Director, etc.)"))

# explore over time
prop_by_job_title_per_year_tbl <- 
jobdata %>%
  group_by(year_ad_posted) %>%
  count(job_title_simple) %>%
  mutate(prop = n / sum(n))

prop_by_job_title_per_year_tbl_wide <- 
prop_by_job_title_per_year_tbl %>% 
  select(-prop) %>% 
  pivot_wider(names_from = year_ad_posted,
              values_from = n) %>% 
  mutate(across(everything(), .fns = ~replace_na(.,0)))

fig_prop_by_job_title_per_year <- 
  ggplot(prop_by_job_title_per_year_tbl) +
  aes(year_ad_posted,
      n,
      group = job_title_simple,
      fill = job_title_simple) +
 # geom_line(linewidth = 2) +
  geom_col() +
 theme_minimal(base_size = base_size) +
  xlab("") +
  ylab("Number of\ntenure-track job ads") +
  scale_fill_brewer(palette = "Dark2") +
  guides(fill = guide_legend(nrow=2,
                               byrow=TRUE,
                               "Job title",
                                keywidth=0.1,
                 keyheight=0.1,
                 default.unit="inch")) +
    theme(legend.position = c(0.5, 0.85)) +
  guides(x = "none") +
  ylim(0,100)

```

```{r}
# get US job ads only 
state_to_st <- function(x){
       c(state.abb, 'DC')[match(x, c(state.name, 'District of Columbia'))]
}

state_name_and_abb <-
enframe(state.name, value = 'state_name') %>%
       mutate(state_abbr = state_to_st(state_name))

jobdata_us_only <- 
jobdata %>% 
  mutate(state_country = regmatches(name_of_hiring_university,
                                    gregexpr( "(?<=\\().+?(?=\\))",
                                              name_of_hiring_university,
                                              perl = T))) %>%
  unnest(state_country) %>% 
  filter(state_country %in% state.abb)
  

fig_prop_by_job_title_per_year_us <- 
jobdata_us_only %>%
  group_by(year_ad_posted) %>%
  count(job_title_simple) %>%
  mutate(prop = n / sum(n)) %>%
  ggplot() +
  aes(year_ad_posted,
      n,
      group = job_title_simple,
      fill = job_title_simple) +
 # geom_line(linewidth = 2) +
  geom_col() +
 theme_minimal(base_size = base_size) +
  xlab("") +
  ylab("Number of\ntenure-track job ads") +
  scale_fill_brewer(palette = "Dark2") +
  guides(fill = guide_legend(nrow=2,
                               byrow=TRUE,
                               "Job title",
                                keywidth=0.1,
                 keyheight=0.1,
                 default.unit="inch")) +
    theme(legend.position = c(0.5, 0.85)) +
  guides(x = "none") +
  ylim(0,100)

total_number_of_us_ads_in_our_sample <- nrow(jobdata_us_only)

# all of our analysis is on the US jobs ads only
jobdata <- jobdata_us_only
```

```{r}
#| label: ratio-tt-to-non-tt

base_url_to_2019 <- "https://academicjobs.fandom.com/wiki/Archaeology_Jobs_"
base_url_after_2020 <- "https://academicjobs.fandom.com/wiki/Archaeology_"

# starts at 2010-2011
# fix for 2021-22
# base UR

years_to_2019 <- map_chr(2012:2019, ~str_glue('{.x}-{.x +1}'))
years_after_2020 <- map_chr(2020:2022, ~str_glue('{.x}-{.x +1}'))
# though it seems to start at 2007-8: https://academicjobs.fandom.com/wiki/Archaeology_07-08

# make a set of URLs for each page for each year
urls_for_each_year <- c(str_glue('{base_url_to_2019}{years_to_2019}'), 
                        str_glue('{base_url_after_2020}{years_after_2020}')) %>% 
    str_replace("2021-2022", "2021-22")
```

```{r}
#| eval: false

library(rvest)

# scrape the web pages to get the 
# ratio of tenure-track to untenured positions
# base URL changes after 2018_2019
# We did this once and then saved the output so we don't scrape every
# time the quarto document is rendered. So this code block is
# eval: false to avoid repeated and unnecessary scraping

# all years
urls_for_each_year_headers <- 
map(urls_for_each_year,
    ~.x %>% 
      read_html() %>% 
      html_nodes('.mw-headline') %>% 
      html_text())

# save this list so we don't have to scrape again
library(rlist)
list.save(urls_for_each_year_headers, 
          here('analysis/data/raw_data/urls_for_each_year_headers.yaml'))
```

```{r}
#| label: ratio-tt-to-non-tt-jobs

library(rlist)
urls_for_each_year_headers <-  list.load( here('analysis/data/raw_data/urls_for_each_year_headers.yaml'))

# keep only headings that are actual jobs, they include the terms:
job_headings <- c("college", "university")

total_number_of_jobs_per_year <- 
  map(urls_for_each_year_headers,
      ~str_subset(tolower(.x),
          paste0(job_headings, collapse = "|")))

total_number_of_jobs_per_year_n <- 
map_int(total_number_of_jobs_per_year, length)

total_number_of_jobs_per_year_tbl <- 
tibble(
  url_to_data_source_e_g_paste_in_url_to_the_jobs_wiki_page = urls_for_each_year,
  total_number_of_jobs_per_year = total_number_of_jobs_per_year_n
)

# count of TT jobs per year from our manual data collection,
# join with our total number of all jobs by scraping
count_of_tt_jobs_per_year_from_our_form <- 
jobdata %>% 
  group_by(url_to_data_source_e_g_paste_in_url_to_the_jobs_wiki_page) %>% 
  tally() %>% 
  right_join(total_number_of_jobs_per_year_tbl) %>% 
  rename(n_tt_jobs  = n,
         n_total_jobs = total_number_of_jobs_per_year) %>% 
  mutate(n_non_tt_jobs = n_total_jobs - n_tt_jobs,
         ratio_tt_2_ntt = n_tt_jobs / n_non_tt_jobs) %>% 
  mutate(year = str_extract(url_to_data_source_e_g_paste_in_url_to_the_jobs_wiki_page,  "[[0-9]]{4}-[[0-9]]{4}|2021-22")) %>%  
  mutate(year = ifelse(year =="2021-22",  "2021-2022", year))  %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year, "-", 
                                            "–\n")) # en-dash
  
# draw plot
fig_ratio_tt_2_ntt_jobs_per_year <- 
  ggplot(count_of_tt_jobs_per_year_from_our_form) +
  aes(year_ad_posted_break, 
      group = 1,
      ratio_tt_2_ntt) +
  #geom_line(linewidth = 2) +
  geom_col() +
  geom_hline(yintercept = 1,
             colour = "red") +
  annotate("text", 
           x = 6, 
           y = 1.4, 
           label = "1:1 ratio",
           colour = "white",
           size = 3) +
  labs(y = "Ratio of tenure-track\nto non-tenure-track and other",
       x = "") +
  theme_minimal(base_size = base_size) +
  scale_x_discrete(name = "Academic Year") 
   #guides(x = "none")
```

```{r}
#| label: combine-basic-plots

# save these three plots as one set
library(cowplot)
p <- 
plot_grid(
 fig_prop_by_job_title_per_year_us + theme(plot.margin = unit(c(0, 0, 0, 0), "cm")),
  fig_ratio_tt_2_ntt_jobs_per_year + theme(plot.margin = unit(c(0, 0, 0, 0), "cm")),

  ncol = 1,
  align = "hv",
  axis = "lr",
  labels = "AUTO",
  label_size = 8
)

ggsave(filename = here("analysis",
            "figures", 
            "fig-panel-per-year.png"),
       bg ="white",
      plot = p,
       h = 5, # experiment with h and w to get the right size and proportion 
       w = 7,
       units = "in",
       dpi = 900) # make the image nice and crisp

```

<!-- Do not use “INTRODUCTION” or “ABSTRACT” as headings. -->

Attend any workshop, conference, or panel that includes early career researchers and the conversation will be steered inexorably towards the academic job market: who is hiring, who has attained a tenure-track position, and who is out of luck this season. Tenure-track positions are a type of academic job that typically involve a probationary period (e.g. 5-7 years) culminating in an evaluation of research, teaching, and service, that if successful, results in permanent employment, job security and academic freedom. This obsessive focus on career trajectories is warranted. As of 2019, 53.5% of colleges and universities had replaced tenure-eligible lines with contingent positions [@the20222022]; today, 71% of faculty in the US are non-tenure-track [@culver]. The erosion of permanent jobs in American higher education is linked to a complex intersection of political and economic factors [@beck], including decreasing federal support for higher education, concomitant increases in student debt [@gusterson2017], a pronounced shift in university investment from faculty to administration [@graeber2018, pp. 162–163], and the growing privatization and market orientation of scientific research [@mirowski2011].

These cultural and economic shifts are also well encapsulated by anecdata; any conversation with a junior scholar will reveal the impact of these larger professional transformations on personal and professional trajectories. The first author on this paper has applied to five academic positions over the course of his career, while the last author has applied to one hundred. A twenty-fold increase in the number of applications required to obtain a workable long-term academic position may seem preposterous, but these changing requirements for applicants are familiar to anyone who has obtained their PhDs since the Great Recession of 2008. This competitive landscape has deeper roots than the last economic crisis; writing more than three decades ago, Rabinow pinpointed "an awareness... that standards have changed during the last thirty years and the quantitative and qualitative demands for entry into the system are immeasurably higher now" [-@rabinow1992, pp. 66].

These higher demands include increased overall productivity, higher national and international mobility, more time spent in precarious short-term contracts, and the investment of a greater amount of time and energy in applying for long-term positions. In their survey of early career researchers in European archaeology, for example, Brami et al. found that 52% of respondents who had obtained their PhD at least two years before the survey were on fixed-term contracts, while only 9% were in permanent positions [-@bramiPrecariousFutureReflections2023, Figure 5]. In their words, "the queue of eager post-docs hoping for a long-term appointment is getting longer, as is the average time spent in the 'queue'" [-@bramiPrecariousFutureReflections2023,239]. Ribeiro and Giamakis emphasize that this demographic comprises an academic precariat that is essential to the functioning of universities, but consists of a workforce perpetually "stranded between employment and unemployment" [@ribeiro2023, pp. 10].

Junior scholars with faculty ambitions are thus stuck in a double-bind, forced to funnel their energy into seemingly endless applications for which they receive little to no feedback and which remain invisible on their CVs. As Dennis et al. underscore, early career researchers are "supplicants"—"There is no way for applicants to point out that the job ads are taking too much time out of the scholarly community’s collective time bank" [@dennisWorstAnthroJob2022, pp. 1]. Acknowledging the new reality that applying for academic positions is in and of itself a full-time job, a growing number of anthropology graduate programmes are offering professionalization courses that cover the ins and outs of everything from crafting strong cover letters and CVs to performing well in long-list interviews and preparing teaching demonstrations. These courses can provide valuable training in the hidden curriculum of the academy, but the fact that job applications are so complicated that they require training to navigate suggests more disciplinary attention should be paid to the "market" as a historically contingent set of cultural practices. As Rabinow maintains, "if we want ethical considerations to play a central role in the articulation of truth and power—and I think we do—then bringing such considerations into view is the necessary first step towards recognizing who we are today and setting out on the road to a better place" [-@rabinow1992, pp. 71].

We argue that to understand the dynamics of hiring in academic archaeology, we must start at the beginning, with the job ad itself. There is an abundance of recent work on who does and does not get hired into tenure-track positions in anthropology and archaeology, but less scholarship on how those hires unfold. Research on hiring dynamics has amply demonstrated that *where* you get your PhD has an enormous impact on if and where you get a tenure-track position [@kawaSocialNetworkUS2019; @mackieMarketShareAccounting2023], but how about *what* you study? Are there topical, methodological, or regional specialties that are in consistent demand, or is there continual flux generated by intellectual fads, economic incentives, and political attention? Are job applications more demanding now than they were in the past, or is this a specious perception generated by the sheer volume of applications necessary to obtain a long-term academic position?

To answer these questions, this paper explores the demand-side of the academic job market for archaeologists in the United States. Our study had two aims: first, to determine if disciplinary trends could be discerned in the topical, geographic, and methodological foci of the positions advertised over a ten-year period, and second, to investigate how requirements for applicants have changed over time.

# Background

The academic job market is a source of uncertainty, for both job seekers and hiring committees. Job seekers must search for ads that are well-matched to the skill sets and professional experiences that they have taken years to cultivate. Hiring committees must sift through tens to hundreds of applicants in the hope of finding a candidate that meets all of their needs and helps to realize their visions for their program and for the discipline. Finding the right candidate for the position—or the right position for the candidate—is akin to finding a needle in a haystack.

Among many scholars, there is also a perception that the last three decades have seen the academic job market become increasingly competitive. Across the social sciences and humanities, there are fewer jobs available relative to the number of PhD graduates, and higher numbers of short-term positions relative to permanent positions[@bessner2021; @bramiPrecariousFutureReflections2023; @kawaSocialNetworkUS2019; @kelsky2015; @mackieMarketShareAccounting2023]. This market saturation has arisen in tandem with increasingly complex application requirements. Many job ads now solicit specific documents in *addition* to the cover letter and CV, such as teaching, research, and diversity statements. These additional documents must be tailored for each application, making the process of applying for jobs a full-time job of its own.

In American anthropology, the number of doctoral anthropology graduates has increased by about 70% over the past 30 years, but the number of new faculty positions has not increased proportionally [@speakman2018choosing]. New faculty positions have dwindled, in part due to the removal of the of the Age Discrimination in Employment Act (ADEA) exemption in 1994 which prohibited mandatory retirement ages in higher education [@earle2014]. When combined with the institution of tenure, the ADEA exemption allowed faculty to stay in their posts for as long as they liked. The median age for faculty in the U.S. now ranks among the highest for all professions [@kaskie2016]. In tandem with the gradual de-investment in American higher education since 1980s [@mirowski2011] and the aftershocks of the 2008 recession, the ADEA exemption has cultivated an environment where new lines are few and far between. Among biological anthropologists, for example, @Passalacqua_2018 found a ratio of 0.81 PhDs to job academic advertisements per year, concluding that academic positions in biological anthropology are barely at sustainable levels. This echoes findings from other fields. In biomedical sciences, there is one tenure-track position in the US for approximately every 6.3 PhD graduates [@Ghaffarzadegan_2015]. In engineering, Larson et al., have calculated that providing jobs for even 50% of PhD graduates would require the field to expand at an "improbable" rate of 14% per year [-@larson2014, pp.747]. As they emphasize, "... the system in many places is saturated, far beyond capacity to absorb new PhDs in academia at the rates they are being produced" [@larson2014, pp.749].

PhD graduates who do not go directly into a tenure-track faculty position after graduation often go into a series of short-term appointments as part-time or limited contract instructors, also known as adjunct or contingent faculty. The rising number of contingent faculty has long been a concern in US higher education [@Trevithick2010]. Data from the American Association of University Professors' 2021–22 faculty survey indicate that more than 60% of faculty positions in US universities were held by non-tenure-track full time or part time contingent faculty members [@colby2022annual]. Contingent faculty positions are precarious because they provide low or no health and retirement benefits, limited opportunities for professional development, and lower salaries relative to tenure-track positions. PhD graduates who have a sequence of short-term academic positions are often disadvantaged financially due to low compensation combined with expensive and frequent relocation, restrictive socially due to isolation from family and community, and limited professionally due to being ineligible for many decision-making roles at the universities at which they work [@platzerAcademicPrecarityAmerican2018].

Success in tenure-track job applications in archaeology is strongly determined by where applicants get their PhDs. Data from the 2014–2015 AnthroGuide publication of the American Anthropological Association shows that just ten out of over 100 US graduate programs produced over 30% of the graduates hired into tenure-track faculty positions [@speakman2018choosing]. Top-ranking programs are placing fewer than one in three graduates in tenure-track jobs [@mackieMarketShareAccounting2023]. Similarly, a network analysis of 1,918 faculty holding tenured or tenure-track positions at PhD-granting anthropology programs in the US in 2015 (including 506 archaeologists) found that the just fifteen graduate programs produced 53 percent of tenured and tenure-track positions [@kawaSocialNetworkUS2019]. This network analysis showed that programs with large endowments and widely cited faculty who hold prestigious awards produce the majority of tenured and tenure-track faculty.

Hiring bias predicated on the prestige of specific institutions and programs is not unique to anthropology. Targeted studies of sociology, communication, operations research, and industrial systems engineering show similar dynamics [@barnett2010; @castillo; @feeley2021; @nevin2019]. Broader analyses comparing computer science, business, and history identify comparable patterns among disparate disciplines across the humanities, social sciences, and STEM field—"across disciplines, prestige hierarchies make the most accurate predictions of faculty placement" [@clauset2015, pp. 4]. The most recent comprehensive meta-analysis of faculty placement dynamics in the United States, which examined employment and doctoral education of all tenure-track faculty at PhD-granting universities, underscored the outsize impact of institutional prestige: 80% of faculty trained in the US came from just 20% of institutions [@wapmanQuantifyingHierarchyDynamics2022a]. Within anthropology, such studies draw attention to a central paradox—a discipline purportedly committed to fighting social inequalities continues to reproduce its own systemic inequalities through hiring practices that favor an elite minority of candidates with prestigious affiliations.

One way that some hiring committees are tackling prestige biases is by providing detailed instructions to applicants on how to prepare their application materials. In theory, detailed applications will allow the hiring committee to focus on evaluating the accomplishments of candidates across common categories rather than ranking based on prestige signals in a CV, such as a name of the applicant's graduate program. This push for equity has resulted in job ads that are often highly prescriptive in the types of documents that applicants should submit. For example, in addition to a cover letter and CV, job ads in many fields now require applicants to submit short statements detailing their previous and future contributions to teaching, research, and diversity. In a comparison of job ads from 1999–2000 and 2019–2020 published in *Anthropology News*, @HelloTristesTropes2021 noticed an increase in the number of materials requested from applicants. For example, twice as many 2019–2020 job ads requested writing samples compared to 1999–2000, and nearly four times as many requested statements of teaching philosophy. In their review of the 'worst job ads of 2021' @dennisWorstAnthroJob2022 reported job ads from Oberlin College and Grinnell College with particularly extreme requirements, which respectively requested nine and thirteen documents from applicants. This high burden on applicants disproportionately favors people with more time and financial resources to prepare the required materials.

A notable requirement that has emerged in recent years is a diversity statement, where the applicant describes their knowledge of, prior contributions to, and future goals for advancing diversity, equity, and inclusion. This requirement has been much-debated largely due to an experiment during 2016–2022 at several University of California campuses that used diversity statements as the first cut for selecting candidates for tenure-track faculty positions [@soucek2021diversity]. Only candidates that scored highly on their diversity statements would have the rest of their application evaluated. This experiment generated intense and widespread public debate about the merits and risks of requiring and using diversity statements. These debates drew attention to the challenges of hiring faculty from underrepresented minorities, and resulted in a variety of approaches to evaluating diversity, even leading some universities to entirely omit requirements for diversity statements in job applications [@guidenAreDiversityStatements]. <!-- **MORE DETAILS ON THIS HERE—JB WILL ADD.** BM: ok, thank you! -->

# Materials and methods

## Contextualising the Archaeology Academic Jobs Wiki as a data source

Our primary data source is the Archaeology Academic Jobs Wiki. Originating in 2007, the wiki is a set of freely accessible web pages that anyone can edit anonymously or with a free user account. The site is hosted by Fandom, a for-profit company. The Archaeology pages are part of the Academic Jobs Wiki, which coordinates similar collaboratively-edited resources for around 40 academic disciplines. The coordinators and contributors are nearly all anonymous or pseudonymous. Typically, contributors copy and paste all or some of the text of job ads into the wiki, from a variety of sources such as the *Chronicle of Higher Education*, *Higher Ed Jobs*, and university websites. Other contributors then edit the web page to add comments below an ad to share relevant information based on their experience in applying for that position. These edits result in annotations such as a tally of how many people have applied, the dates of events such as requests for more materials, interviews, offer made, rejection notices, etc. Contributors also edit the page to ask and answer questions about the positions and the application process. These comments make the Academic Jobs Wiki a unique resource for timely and specific information for job-seekers about positions they are interested in, and one of the most important internet resources for the academic job market. Because of its reputation for aggregating ads from diverse sources and rapidly-updated information that is not available elsewhere, the Academic Jobs Wiki has become an authoritative data source for studies of hiring trends in academia [e.g. @Passalacqua_2018; @musial2018five] and a widely recommended resource for applicants [e.g. @lightfoot2021preparing].

```{r}
#| eval: false

#------------------------------------------------------
# scrape wiki page to describe editing dyanmics,
# save the results so we don't do this often

# starting from : ratio-tt-to-non-tt above
# get the history of edits page "?action=history&offset=&limit=10000"

edits_page <- "?action=history&offset=&limit=10000"

edits_urls_for_each_year <-
  str_glue('{urls_for_each_year}',
           '{edits_page}' )

library(rvest)

# scrape from the webpages and make a table of key edit variables
# this takes a few minutes
edits_urls_for_each_year_lst_tbl <-
map(edits_urls_for_each_year,
    ~{
      # get webpage
      pge <- read_html(.x)

      # extract key variables for each edit
      # into a table
      tibble(
      edit_date =  pge %>%
        html_elements(".mw-changeslist-date") %>%
        html_text2(),
      edit_name =  pge %>%
        html_elements(".mw-userlink bdi") %>%
        html_text2(),
      edit_size =  pge %>%
        html_elements(".mw-plusminus-neg , .mw-plusminus-null , .mw-plusminus-pos") %>%
        html_text2()
      )
    }
)

# handle getting the edit comment which tells us which section
# of the page was edited, it's blank for many edits, but there
# might be some interesting patterns in there
edits_urls_for_each_year_lst_section <-
  map(edits_urls_for_each_year,
      ~read_html(.x) %>%
        html_elements('#pagehistory li') %>%
        html_text2()
  )

edits_urls_for_each_year_lst_section_tbl <-
map(edits_urls_for_each_year_lst_section,
    ~{
      # Extract time and date
      edit_date <-
        stringr::str_extract(.x, "\\d{2}:\\d{2}, \\d{1,2} [A-Za-z]+ \\d{4}")

      edit_size <- str_extract(.x, "bytes\\s([+-]?\\d+)") |>
         str_remove("bytes\\s")


      # Extract text between → and undo
      edit_comment <- stringr::str_extract(.x, "→(.*?) undo")
      edit_comment <- stringr::str_remove_all(edit_comment, "→| undo")  # clean up

      # Combine into a data frame
      tibble(edit_date,
             edit_size,
             edit_comment)
    }
)

# join together key variables and edit comments
edits_urls_for_each_year_lst_tbl_with_comments <-
map2(edits_urls_for_each_year_lst_tbl,
     edits_urls_for_each_year_lst_section_tbl,
    ~ left_join(.x, .y,
                relationship = "many-to-many") %>%
      # deduplicate
      distinct()
)

names(edits_urls_for_each_year_lst_tbl_with_comments) <-
  c(years_to_2019,
    years_after_2020)

# combine list into one big data frame
edits_for_each_year_tbl <-
bind_rows(edits_urls_for_each_year_lst_tbl_with_comments,
          .id = "year_ad_posted") %>%
  mutate(
    edit_size_num = parse_number(str_replace(edit_size, "−", "-")),
    edit_time = parse_date_time(edit_date,
                                 orders = "HM, d B Y"),
    # round down to first day of month
    edit_month = floor_date(edit_time,
                            unit = "month"),
    edit_year = floor_date(edit_month,
                           unit = "year"),
    edit_year_only = year(edit_month),
    job_market_year = parse_number(str_sub(year_ad_posted,
                              -4L))
  ) # %>%
  # delete edits that were made after the job market year
  # filter(edit_year_only == job_market_year | edit_year == (job_market_year -1))

write_csv(edits_for_each_year_tbl,
          here::here("analysis/data/raw_data/edits_for_each_year_tbl.csv"))

```

```{r}

edits_for_each_year_tbl <- read_csv(
          here::here("analysis/data/raw_data/edits_for_each_year_tbl.csv"))

# visualisations ----------------------------------
small_base_size <- 4

# Number of edits per year
p_edits_per_year <-
  edits_for_each_year_tbl %>% 
  filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
ggplot() +
  aes(as_date(edit_year)) +
  geom_bar() +
  theme_minimal(base_size = small_base_size) +
  scale_x_date(date_breaks = "1 year",
               date_labels = "%Y") +
  labs(x = "", y = "Number of edits") +
  theme(axis.text.x = element_text(angle = 90,
                                   vjust = 0.5))

# Number of unique editors per year
p_editors_per_year <-
edits_for_each_year_tbl %>%
    filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
  group_by(edit_year) %>%
  summarise(n_distinct_editors = n_distinct(edit_name)) %>%
ggplot() +
  aes(as_date(edit_year),
      n_distinct_editors) +
  geom_col() +
  theme_minimal(base_size = small_base_size) +
  scale_x_date(date_breaks = "1 year",
               date_labels = "%Y") +
  labs(x = "", y = "Number of editors\n(distinct usernames or IP addresses)") +
  theme(axis.text.x = element_text(angle = 90,
                                   vjust = 0.5))

# Editor activity over time

# life span of an editor, from first edit to last edit
edits_for_each_year_tbl_span <-
edits_for_each_year_tbl %>%
    filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
  group_by(edit_name) %>%
  summarise(first_edit = min(edit_month),
            last_edit =  max(edit_month),
            edit_span = last_edit - first_edit,
            edit_span_years = as.numeric(edit_span,
                                         units = "days") / (365.25)) %>%
  mutate(first_edit_year = year(first_edit),
         last_edit_year =  year(last_edit))

# Most editors are only active for less that one year
p_editor_life_distr <-
  edits_for_each_year_tbl_span %>% 
  mutate(edit_span_years = edit_span_years + 0.001) %>% 
ggplot() +
  aes(edit_span_years) +
  geom_histogram() +
  scale_y_continuous(trans = scales::pseudo_log_trans(sigma = 0.01),
                     breaks = c(0, 1, 10, 100, 1000), minor_breaks = NULL) +
  theme_minimal(base_size = small_base_size) +
  labs(x = "Years editing", y = "Number of editors")

# how many active for less than one year?
edits_for_each_year_tbl_span_tbl <- 
edits_for_each_year_tbl_span %>% 
  group_by(edit_span_years) %>% 
  summarise(n = n()) %>% 
  mutate(perc = n / sum(n) * 100)

# how many active for less than one day?
edits_for_each_year_tbl_span_tbl_less_than_one_day  <- 
  edits_for_each_year_tbl_span_tbl[1, ]$n

edits_for_each_year_tbl_span_tbl_less_than_one_day_perc  <- 
  round(edits_for_each_year_tbl_span_tbl[1, ]$perc, 0)

# how many active for less than one year?
edits_for_each_year_tbl_span_tbl_less_than_one_year <-
edits_for_each_year_tbl_span_tbl %>% 
  filter(between(edit_span_years, 0.01, 1)) %>% 
  pull(n) %>% sum()

edits_for_each_year_tbl_span_tbl_less_than_one_year_perc <- 
  round(
    edits_for_each_year_tbl_span_tbl_less_than_one_year /  sum(edits_for_each_year_tbl_span_tbl$n) * 100, 0)

# how many active for more than one year?
edits_for_each_year_tbl_span_tbl_more_than_one_year <-
edits_for_each_year_tbl_span_tbl %>% 
  filter(between(edit_span_years, 1, 10)) %>% 
  pull(n) %>% sum()

edits_for_each_year_tbl_span_tbl_more_than_one_year_perc <- 
  round(edits_for_each_year_tbl_span_tbl_more_than_one_year / sum(edits_for_each_year_tbl_span_tbl$n) * 100, 0)

# average length for those more than one day
edits_for_each_year_tbl_span_tbl_mean <- 
edits_for_each_year_tbl_span_tbl %>% 
  filter(between(edit_span_years, 0.01, 10)) %>% 
  pull(n) %>% mean() %>% round(1)
  

# for those editors active for more than three months:
p_editor_life_distr_year <-
edits_for_each_year_tbl_span %>%
 filter(edit_span_years > 0.25) %>%
ggplot() +
  aes(as_date(first_edit_year),
      reorder(edit_name, first_edit_year)) +
  geom_segment(aes(x =   first_edit,
                   xend = last_edit),
               linewidth = 0.1,
               lineend = "butt") +
  theme_minimal(base_size = small_base_size) +
  labs(x = "", y = "Individual editors\n(usernames and IP addresses redacted)") +
  theme(axis.text.y=element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),)

# size of edits per year
p_edit_size_per_year <-
edits_for_each_year_tbl %>%
    filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
  group_by(edit_year) %>%
  summarise(edit_size_num = sum(edit_size_num)) %>%
  ggplot() +
  aes(as_date(edit_year),
      edit_size_num) +
  geom_col() +
  theme_minimal(base_size = small_base_size) +
  scale_x_date(date_breaks = "1 year",
               date_labels = "%Y") +
  labs(x = "", y = "Sum of edits (Bytes)") +
  theme(axis.text.x = element_text(angle = 90,
                                   vjust = 0.5))

# typical edit size per year
p_median_edit_size_per_year <-
edits_for_each_year_tbl %>%
    filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
  group_by(edit_year) %>%
  # median, because sometimes there are 1-2 very large
  # page reformatting edits
  summarise(edit_size_num = median(edit_size_num)) %>%
  ggplot() +
  aes(as_date(edit_year),
      edit_size_num) +
  geom_col() +
  theme_minimal(base_size = small_base_size) +
  scale_x_date(date_breaks = "1 year",
               date_labels = "%Y") +
  labs(x = "", y = "Median edit size (Bytes)") +
  theme(axis.text.x = element_text(angle = 90,
                                   vjust = 0.5))


# which sections get the most edits?
section_edit_tally_tbl <-
edits_for_each_year_tbl %>%
  mutate(edit_comment = str_squish(edit_comment)) %>%
  filter(!is.na(edit_comment)) %>%
  # remove all caps text at the end of the position name, those are status changes
  # in the same position
  mutate(edit_comment = gsub("\\s+[A-Z]+(?:\\s+[A-Z]+)*$", "", edit_comment)) %>%
  filter(!edit_comment %in% c("Current Users",
                              "DISCUSSION, RUMORS, SPECULATION",
                              "DISCUSSION, RUMORS AND SPECULATION",
                              "General Discussion, Rumors, and Speculation",
                              "Rejection Etiquette",
                              "Current Users Edit",
                              "Description",
                              "RESEARCH",
                              "TENURE",
                              "NON-TENURE-TRACK",
                              "ASSISTANT",
                              "TENURE-TRACK OR TENURED / FULL-TIME",
                              "Tenure-Track or Tenured / Full-time Position",
                              "Posting Names of Job-Getters",
                              "VISITING POSITIONS / LIMITED TERM APPOINTMENTS / POSTDOCS")) %>%
  filter(!str_detect(edit_comment, "Updated:|Wiki")) %>%
  group_by(edit_year,
           edit_comment) %>%
  tally(sort = TRUE)

# edits per section for each year
library(ggbeeswarm)
p_edit_number_per_entry_per_year <-
section_edit_tally_tbl %>% 
    filter(between(edit_year,
                 as.POSIXct("2012-01-01 0:00:00"), 
                 as.POSIXct("2023-01-01 0:00:00"))) %>% 
  ggplot() + 
  aes(as_date(edit_year),
      group = as_date(edit_year),
      n) +
  geom_boxplot(outlier.size = 0.5) +
  theme_minimal(base_size = small_base_size) +
  scale_x_date(date_breaks = "1 year",
               date_labels = "%Y") +
  labs(x = "", y = "Number of edits per job ad") +
  theme(axis.text.x = element_text(angle = 90,
                                   vjust = 0.5))
```

```{r}
#| label: fig-panel-wiki-self-report-numbers
#| fig-cap: "Number of users self-reporting in each category of 'current users' per year"

# get the dat
# 2021-22 and 2022-2023
current_user_tbl <-
map(
urls_for_each_year[1:9],
~.x %>%
  read_html() %>%
  html_elements("p+ table td") %>%
  html_text2()
)

current_user_tbl_2021_22 <-
    urls_for_each_year[10]  %>%
      read_html() %>%
      html_elements("table:nth-child(1086) td") %>%
      html_text2()

current_user_tbl_2022_2023 <-
    urls_for_each_year[11] %>%
      read_html() %>%
      html_elements("h2+ .fandom-table td") %>%
      html_text2()

current_user_tbl_all <- append(current_user_tbl,
                        c(list(current_user_tbl_2021_22),
                          list(current_user_tbl_2022_2023)
                        ))

names(current_user_tbl_all) <- urls_for_each_year

names(current_user_tbl_all)[names(current_user_tbl_all) == "https://academicjobs.fandom.com/wiki/Archaeology_2021-22"] <- "https://academicjobs.fandom.com/wiki/Archaeology_2021-2022"

wiki_data_list <-
map(current_user_tbl_all,
    ~.x %>% .[1:40] %>%
    stringi::stri_remove_empty(.x))

# Use map_dfr to iterate through the list and its names, binding results
tidy_table <- map_dfr(wiki_data_list, ~{
  # Process one vector (.x) at a time
  tibble(raw = .x) %>%
    # Create a lagged column to easily access the previous element
    mutate(
      previous_raw = lag(raw),
      # Attempt to parse the current value as a number
      # suppressWarnings handles cases where it's clearly not numeric
      # !is.na checks if parsing was successful
      is_count = !is.na(suppressWarnings(readr::parse_number(raw))),
      # Check if the *previous* value looks like a number
      prev_is_count = !is.na(suppressWarnings(readr::parse_number(previous_raw)))
    ) %>%
    # Keep rows where:
    # 1. The current row IS a count (is_count == TRUE)
    # 2. The previous row exists (previous_raw is not NA)
    # 3. The previous row IS NOT a count (prev_is_count == FALSE)
    #    This ensures we grab the status text, not a preceding number
    filter(is_count & !is.na(previous_raw) & !prev_is_count) %>%
    # Select and rename the relevant columns, converting count to numeric
    transmute(
      status = previous_raw,
      count = readr::parse_number(raw) # Convert count string to number
    )
}, .id = "url") %>% # .id creates a column 'url' from the list names
  # Extract the year from the URL
  mutate(
    year = str_extract(basename(url), "\\d{4}-\\d{4}"), # Extracts YYYY-YYYY pattern
    .before = status # Place the year column before status
  ) %>%
  select(year, status, count) # Keep only the final desired columns

#  the resulting tidy table
tidy_table_to_plot <- 
tidy_table %>%
  filter(!status %in% c("I'm a lurker",
                        "I have a current but term-limited faculty job",
                        "I have some other teaching, research, or non-academic gig",
                        "Nope (independent scholar, on sabbatical from adjuncting, etc.)")) %>%
  mutate(year = str_sub(year, 6L)) 

# summary over time
how_many_people_use_the_wiki <- 
tidy_table_to_plot %>% 
filter(status == "How many people use the wiki?") 

how_many_people_use_the_wiki_perc_start_end <- round(
(how_many_people_use_the_wiki$count[1] - how_many_people_use_the_wiki$count[nrow(how_many_people_use_the_wiki)]) / how_many_people_use_the_wiki$count[1] * 100, 0)

# proportion of search committee members
search_committee_members_tbl <- 
tidy_table_to_plot %>% 
  filter(status %in% c( "How many people use the wiki?",
                       "I'm a search committee member")) %>% 
  pivot_wider(names_from = status,
              values_from = count) %>% 
  mutate(perc = round(`I'm a search committee member` / 
          `How many people use the wiki?` * 100, 0)) %>% 
  drop_na()

search_committee_members_perc_start <- 
  search_committee_members_tbl$perc[1] 
search_committee_members_perc_end <- 
  search_committee_members_tbl$perc[nrow(search_committee_members_tbl)]

# "The Thing" Inspired Palette (8 Colors)
the_thing_palette <- c(
  "#6488AC", # 1. Icy Blue
  "#1A2A3A", # 2. Deep Shadow Blue/Black
  "#E8702A", # 3. Flamethrower Orange
  "#9D2323", # 4. Blood Red/Creature Tissue
  "#8B7355", # 5. Outpost Brown
  "#E1E1E1", # 6. Snowy Off-White/Grey
  "#5F7C6A", # 7. Parka Green/Drab
  "#D9A443"  # 8. Warning Yellow/Orange (Muted)
)

how_many_people_use_the_wiki <- 
tidy_table_to_plot %>% 
  filter(status != "How many people use the wiki?") %>% 
  mutate(status = str_wrap(status, 26)) %>% 
ggplot() +
  aes(year,
      count,
      fill = status) +
  geom_col() +
  theme_minimal(base_size = small_base_size) +
  xlab("") +
  scale_fill_manual(values = the_thing_palette) +
  theme(legend.position = c(.7,.8),
        legend.key.size = unit(0.25,"line"),
        legend.text = element_text(margin = margin(r = 10, 
                                                   l = 2,
                                                   t = 2,
                                                   b = 2,
                                                   unit = "pt"))) +
  guides(fill=guide_legend(nrow=3,
                           byrow=TRUE),
         )
```

```{r}
#| label: fig-panel-wiki-characteristics
#| fig-cap: "A: Total number of edits to each Wiki page (additions and deletions) per year. B: Number of unique editors, as represented by distinct usernames or IP addresses (recorded for editors without usernames), active per year. C: Active periods of individual editors, the black lines connect the date of the first and last edit of all editors that were active for three months or more. D: Typical size of each edit per year, either addition or removal of text, one word is roughly 4-6 Bytes. E: Distribution of the numbers of edits per job ad for each year. F: Histogram showing that the majority of editors are only active on the site for less than one year. G: Breakdown of self-reported Wiki user categories for each year."
#| fig-height: 5


library(cowplot)
plot_grid(
 plot_grid(
  plot_grid(p_edits_per_year,
          p_editors_per_year,
          p_median_edit_size_per_year,
          p_edit_number_per_entry_per_year,
          labels = c("A", "B", "D", "E"),
          label_size = small_base_size),
          plot_grid(p_editor_life_distr_year,
                    p_editor_life_distr,
                    rel_widths = c(2),
                    ncol = 1,
                    labels = c("C", "F"),
                    label_size = small_base_size)),
  plot_grid(how_many_people_use_the_wiki,
            labels = "G",
            label_size = small_base_size),
  rel_heights = c(2,1),
  ncol = 1)
```

```{r}
# geolocate users by IP address
# devtools::install_github("ironholds/rgeolocate")

library(rgeolocate)
file <- system.file("extdata","GeoLite2-Country.mmdb", package = "rgeolocate")
results <- maxmind(unique(edits_for_each_year_tbl$edit_name),
                   file,
                   "country_code")

n_all_user_ids <- length(unique(edits_for_each_year_tbl$edit_name))

results_ip_addresses <-
  results %>%
  drop_na()

n_all_user_ips <-  nrow(results_ip_addresses)

# percentage of users that we can geolocate
per_users_we_can_geolocate <- 
  round(n_all_user_ips / n_all_user_ids * 100, 0)

# tally and percentage
results_ip_addresses_tbl <- 
results_ip_addresses %>%
  group_by(country_code) %>%
  tally(sort = TRUE) %>%
  mutate(perc = n / sum(n) * 100)

results_ip_addresses_tbl_us_scl <- 
  results_ip_addresses_tbl %>% 
  filter(country_code == "US") %>% 
  pull(perc) %>% 
  round(0)

```

Collaboratively-edited resources such as the Academic Jobs Wiki can be highly variable in the amount and type of editorial activity over time. It is important to characterise this activity to assess the reliability of the content is as a source of information about the job market. The MediaWiki technology used by Academic Jobs Wiki creates a public record of every act of adding or removing text to any page in the Wiki [@barrett2008mediawiki]. @fig-panel-wiki-characteristics, which allows us to assess the dynamics of editing activity over the ten years of our study period. Every edit includes the author's identity, recorded as either an IP address (a numerical address that includes information about the location of the user's computer) or a username. Of the `r n_all_user_ids` unique editors in our sample, `r per_users_we_can_geolocate`% used IP addresses rather than usernames, and geolocation analysis shows that `r results_ip_addresses_tbl_us_scl`% of IP addresses were based in the US, indicating the Archaeology Jobs Wiki is primarily edited and visited by users in the U.S. The number of edits and active editors roughly halved from 2013 to 2017, and then continued to gradually decline. Despite this downward trend, the size of individual edits slightly increases over time, and the number of edits per job ad is relatively constant across our study period. The majority of editors are active on the site for a single day (n = `r edits_for_each_year_tbl_span_tbl_less_than_one_day`, `r edits_for_each_year_tbl_span_tbl_less_than_one_day_perc`%). There are `r edits_for_each_year_tbl_span_tbl_less_than_one_year` (`r edits_for_each_year_tbl_span_tbl_less_than_one_year_perc`%) editors who were active for between one day and one year. Only `r edits_for_each_year_tbl_span_tbl_more_than_one_year` (n = `r edits_for_each_year_tbl_span_tbl_more_than_one_year_perc`%) editors were active for more than one year, with `r max(round(edits_for_each_year_tbl_span_tbl$edit_span_years,0))` years as the longest period any single editor was active on the Wiki. For those active for more than one day, the average duration of editorial activity is `r edits_for_each_year_tbl_span_tbl_mean` years. This suggests that most of the editing activity on the Wiki reflects a single season of job-searching. Editors with a longer history likely come from two groups, job seekers participating in multiple seasons of job applications, and faculty on search committees posting multiple job ads. That said, inferring the number of editors from the number of IP addresses is complicated by the high mobility of job seekers. For example one person could be represented by several IP addresses as they relocate from one city to another while working in a series of short-term appointments such as post-doctoral fellowships and adjunct teaching positions. This might result in an overestimation of the number of editors on the Wiki and underestimation of the duration of their editorial activity. 

Longer-term editors who represent job seekers active for multiple seasons reflect one of the underdiscussed realities of the academic job market in archaeology—time spent on that market. Previous research on professional trajectories in academic archaeology suggests that early career researchers have a limited shelf life. Mackie and Rockwell, for example, identify a hiring plateau that occurs around seven years after candidates defend their PhDs [-@mackieMarketShareAccounting2023, p. 5]. However, too little time on the market also seems to have a negative effect on placement rates—"very few graduates obtain TT employment when they are all but dissertation (ABD) or even immediately after graduation" [@mackieMarketShareAccounting2023, p. 5]. These patterns are not restricted to the United States. In Brami et al.’s [-@bramiPrecariousFutureReflections2023] survey of 419 early career researchers in European archaeology, likelihood of holding a permanent position shifted relative to time since PhD. Of the respondents who were 1 year or less to 4 years post-PhD, only 3% (3/116) held permanent positions. These numbers increased slightly for participants who had been on the market for 5–7 years, with 14% (7/49) holding permanent positions; similarly, 18% (6/34) of respondents who were on the market for 8 years or more held permanent positions. 

This trajectory in archaeology—where there appears to be a temporal “sweet spot” post-PhD for obtaining permanent academic positions—dovetails with a larger meta-analysis of the career trajectories of PhDs from the humanities and humanistic social sciences. Main et al. [-@main2019] used longitudinal Graduate Education Survey (GES) data from the Andrew W. Mellon Foundation to analyse the career trajectories of over 5,000 PhDs from disciplines in the humanities and humanistic social sciences at three time points: six months post PhD, three years post PhD, and eight years post-PhD. The proportion of surveyed doctorates in tenure-track or tenured faculty positions increased with time since PhD—41% of the sample held a tenure-track position six months after defending, 64% held a tenure-track position three years after defending, and 68% held a tenure-track or tenured position eight years after defending. In keeping with broader patterns observed across the humanities and social sciences, the variable tenures of editors on the Archaeology Jobs Wiki may thus partially reflect the periodicity of hiring relative to job seekers' time since PhD.

There seems to be a shift over time in the balance of editors who identify as job-seekers versus search committee members, as indicated by the number of self-reporting users over time. Panel G of @fig-panel-wiki-characteristics shows the data found on each page in a section labeled 'current users', where users can volunteer to update a table tracking the status of users. These data indicate that the total number of self-reporting users, from the values recording at 'How many people use the wiki?', declined by `r how_many_people_use_the_wiki_perc_start_end`% during the study period. At the same time, the proportion of users self-identifying as "search committee members" increased, from under `r search_committee_members_perc_start`% in 2014-2018 to over `r search_committee_members_perc_end`% from 2020 onward. This suggests that, over time, fewer job applicants have been contributing job postings and sharing information about their experiences, and search committee members have increasingly been posting job advertisements themselves. Overall, the Archaeology Academic Jobs Wiki is best understood not as a comprehensive archive of all jobs posted during the study period, but a biased sample of the the jobs that early career applicants were most focused on applying for, and sharing information about.

## Methods of data collection and classification

For each tenure-track job advertised on the Archaeology Academic Jobs Wiki during 2013-2023, we read the text and recorded the name of the hiring institution, the title of the position, and exact words and phrases from the ad about the topical, geographic, and methodological foci of the position into a Google form. The topical focus is what we understood as the intellectual core of the position—examples of topical foci included environmental archaeology, public archaeology, and North American archaeology. The geographic focus is the region of the world about which the ideal candidate has scholarly expertise, for example, Southwest US, Mediterranean, or Asia and India. The methods focus is the data-generating sub-field of archaeology mentioned in the ad. Examples of methods used in this study include archaeobotany, lithic analysis, and zooarchaeology. We also recorded the type and number of documents requested in each ad (e.g. cover letter, CV, statements on research, teaching, diversity, syllabi, course descriptions, writing samples, transcripts) and how many names/letters of recommenders were requested in the ad.

After completing primary data collection, we studied the topical, geographic, and methods text of each ad. Following the approach of @ryan2003techniques, we collaboratively and manually reduced the variation in the raw data into 10-15 categories appearing in at least 20 (for topics and geography) or 10 (for methods) job ads to simplify analysis and visualization. This means that some topics, such as gender (mentioned in `r n_jobs_mentioning_gender` ads) do not appear in our results because of their rarity in the job ads. Full details of the category reduction, showing the mapping between exact phrases found in the job ads and the categories we used for our analysis, can be found in our Supplementary Materials. Our final topic categories were: American archaeology, Ancient Europe and Mediterranean, Archaeological science, Archaeological theory, Bioarchaeology, Complex societies, Digital archaeology, Environmental archaeology, Evolutionary anthropology, Indigenous and historical archaeology, North Mesoamerican archaeology, Pleistocene archaeology, and Public archaeology. Our geographic categories were: Africa, Americas, Asia & India, Canada & Arctic, Europe, Mediterranean, Meso- & South America, Near East, Oceania, Midwest US, Northeastern US, Southeast US, Southwest US, and Western US. Our methods categories were: Archaeobotany, Archaeometry, Bioarchaeology, Ceramic analysis, Computational and Digital archaeology, Geoarchaeology, Landscape analysis, Lithic analysis, Material culture analysis, and Zooarchaeology.

Individual ads could be recorded to have multiple or none of these topical, geographic, and methods foci, and some of the foci overlap. Some topics include geographic regions because this is how they are typically understood by archaeologists. For example, Mesoamerican archaeology is understood to refer to a specific time period *and* a specific geographic region. Similarly, we recorded digital archaeology as both a method (when a job ad also had a clearly distinct topical focus, such as historic archaeology) and a topic (when there were no other topics mentioned in the job ad). While this polythetic approach results in categorical overlaps that can make the data challenging to interpret [@kuckartz2014qualitative], in our view this reflects the complex realities of how search committees express their needs when searching for new faculty. Acknowledgement of overlaps also produces new insights into hiring dynamics through revealing intersections between different foci.

The entire R code [@rlanguage] and data files used for all the analyses and visualizations contained in this paper are openly available at https://doi.org/xxx/xx [ for peer reviewers the link is https://zenodo.org/records/14798942?preview=1&token=eyJhbGciOiJIUzUxMiJ9.eyJpZCI6ImMyYWE2MDc3LTMxMzAtNDM1Yi1hYTJkLWMyMGMyNWVhOWMyYiIsImRhdGEiOnt9LCJyYW5kb20iOiJiMjkyMTAyN2UwNzEwNWQ2OWIyZmQ4OTkwMjU0MzY1YyJ9.slnC1BbNgZkiJjrRqmKFK9a1bpI-e9VBbjcU7L5OEeYFs3whcL3POsfVj7phDnoaB5A_6mP9wpGirEaT9Dtvug] to enable re-use of materials and improve reproducibility and transparency [@Marwick2017]. All of the figures, tables, and statistical test results presented here can be independently reproduced with the code and data in this repository. The code is released under the MIT license, the data as CC-0, and the figures as CC-BY, to enable maximum re-use.

# Results

We collected data from `r total_number_of_ads_in_our_sample` ads for tenure-track jobs in archaeology posted during 2013-2023. We focus our analysis here on the `r total_number_of_us_ads_in_our_sample` ads for positions at US universities. @fig-show-basic-plots shows the count of ads for each year, where year refers to the year the job ad was posted. @tbl-show-basic-counts shows the breakdown by different job types, ranks, and tenure status. Assistant Professor jobs are consistently the most common title and rank of positions advertised, while open rank or full professor are the least frequent. The ratio of tenure-track to non-tenure-track positions is generally well above one; in other words, this data set is dominated by tenure-track positions. Only academic year 2013-2014 had more non-tenure-track positions than tenure-track positions, which was followed by an upward trend peaking at 2018-2019 and then declining again into the present.

```{r}
#| label: fig-show-basic-plots
#| fig-cap: "A: total number of job ads from US institutions posted to the Academic Jobs Wiki for Archaeology in each year, with coloured sections showing the proportion of jobs by title and rank. B: Ratio of tenure-track to non-tenure-track positions over time. The red line indicates a 1:1 ratio of tenure-track to non-tenure-track positions, bars taller than that line indicate more tenure-track than non-tenure-track positions in that year"

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures", 
            "fig-panel-per-year.png"))

```

```{r}
#| label: tbl-show-basic-counts
#| tbl-cap: "Breakdown of counts of job ads by rank and tenure status. Values in parentheses are for the United States only. TT = tenure-track, US-only, NTT = non-tenure-track, US and elsewhere. Not all ads include unambiguous information about tenure status, so the sum of TT and NTT does not equal the sum of all jobs in all ranks." 

#---------------------------------------------
# want a table to show values for fig 1

prop_by_job_title_per_year_tbl_wide <-
prop_by_job_title_per_year_tbl %>%
  select(-prop) %>%
  pivot_wider(names_from = job_title_simple,
              values_from = n)

prop_by_job_title_per_year_us_only_tbl <-
jobdata_us_only %>%
  group_by(year_ad_posted) %>%
  count(job_title_simple) %>%
  mutate(prop = n / sum(n)) %>%
  select(-prop) %>%
  pivot_wider(names_from = job_title_simple,
              values_from = n)

# combine tables with total (US) numbers

# 1. Join the two tables by year, adding suffixes to distinguish columns
combined_data <- left_join(
  prop_by_job_title_per_year_tbl_wide,
  prop_by_job_title_per_year_us_only_tbl,
  by = "year_ad_posted",
  suffix = c("_wide", "_us") # Suffixes for columns from each table
)

# 2. Identify the original value column names (excluding the join key)
value_cols <- setdiff(names(prop_by_job_title_per_year_tbl_wide), "year_ad_posted")

# 3. Mutate to create the combined columns
#    Iterate through the original value column names
for (col_name in value_cols) {
  # Construct the names of the columns from the joined table
  col_wide_name <- paste0(col_name, "_wide")
  col_us_name <- paste0(col_name, "_us")

  # Use mutate to create a new column (overwriting the original name)
  # with the combined string "Value_Wide (Value_US)"
  # Handle NA values by replacing them with a placeholder like "-"
  combined_data <- combined_data %>%
    mutate(
      !!col_name := paste0(
        # Coalesce NA to "-" before pasting
        coalesce(as.character(!!sym(col_wide_name)), "-"),
        " (",
        coalesce(as.character(!!sym(col_us_name)), "-"),
        ")"
      )
    )
}

# 4. Select only the year column and the newly created combined columns
final_combined_table <- combined_data %>%
  select(year_ad_posted, all_of(value_cols))

# let's add TT and NTT columns to that
count_of_tt_jobs_per_year_from_our_form_tbl <- 
count_of_tt_jobs_per_year_from_our_form %>%
  select(year_ad_posted = year,
         TT = n_tt_jobs,
         NTT = n_non_tt_jobs) %>%
  left_join(final_combined_table) %>%
  relocate(TT, NTT, .after = last_col()) %>%
  relocate(`Full Professor`, .after = `Associate Professor`) %>%
  rename( `Year ad posted` = year_ad_posted) %>%
  # get numeric year, sort, then remove it
  mutate(year_num = parse_number(str_sub(`Year ad posted`, 6L))) %>%
  arrange(year_num) %>%
  select(-year_num)

ft <- flextable(count_of_tt_jobs_per_year_from_our_form_tbl)

# Apply formatting for a clean, professional look similar to booktabs
ft <- ft %>%
  # Apply a theme with minimal lines, good header/footer separation
  theme_booktabs() %>% 
  # Adjust column widths to fit
  autofit() %>% fit_to_width(7) %>% 
  # Left-align all columns (adjust if needed)
  align(align = "left", part = "all") %>% 
  # Center numeric columns (adjust selector)
  align(j = ~ . -year_ad_posted, align = "center", part = "all") %>% 
  # Add some vertical padding
  padding(padding.top = 4, padding.bottom = 4, part = "all") 

# Print the flextable object - it will render as a table in Word
ft
```

## Characteristics of the hiring institutions

```{r}
# Draw of map to show which states have done the most hiring in our sample

# get the text in parentheses after the university name that gives the
# state or country abb
uni_state_country <- # 550
jobdata %>%  # 550 rows
 select(name_of_hiring_university) %>%
  mutate(state_country = regmatches(name_of_hiring_university,
                                    gregexpr( "(?<=\\().+?(?=\\))",
                                              name_of_hiring_university,
                                              perl = T))) %>%
  unnest(state_country)

# tally to get counts:
uni_state_country_tally <-
uni_state_country %>%
  group_by(state_country) %>%
  tally(sort = TRUE)

# did we get all the job ads?
# sum(uni_state_country_tally$n) # 550 all of them

# filter to get US states only
uni_state_country_tally_us <-
uni_state_country_tally %>%
  filter(state_country %in% state.abb) %>%
  select(state_abbr = state_country, n) %>%
  # make sure we have all states in the dataframe
  # even those with no jobs
  right_join(state_name_and_abb) %>%
  select(state = state_name, n, state_abbr) %>%
  mutate(state = tolower(state)) %>%
  mutate(n = ifelse(is.na(n), 0, n))

# how many jobs ads now?
# sum(uni_state_country_tally_us$n) # 431, 78% of the total

library(ggplot2)
library(fiftystater)
# install.packages("devtools")
# devtools::install_github("wmurphyrd/fiftystater")
library(tidyverse)
library(ggrepel)

data("fifty_states")

p_map <- 
ggplot(data= uni_state_country_tally_us,
       aes(map_id = state)) +
  geom_map(aes(fill = n),
           color= "black",
           linewidth = 0.1,
           map = fifty_states) +
  expand_limits(x = fifty_states$long,
                y = fifty_states$lat) +
  coord_map() +
  geom_text_repel(data = fifty_states %>%
              group_by(id) %>%
              summarise(lat = mean(c(max(lat), min(lat))),
                        long = mean(c(max(long), min(long)))) %>%
              mutate(state = id) %>%
              left_join(uni_state_country_tally_us,
                        by = "state"),
            aes(x = long,
                y = lat,
                label = n,
                bg.color = "white",
                bg.r = 0.1),
           # force = 0,
           force_pull = 2,
            size = 5)+
  scale_x_continuous(breaks = NULL) +
  scale_y_continuous(breaks = NULL) +
  labs(x = "",
       y = "") +
  theme(legend.position = "bottom",
        panel.background = element_blank()) +
  scale_fill_viridis_c()

ggsave(plot = p_map, 
       filename = here("analysis",
            "figures",
            "fig-us-state-map.png"),
       bg ="white",
       h = 10, # experiment with h and w to get the right size and proportion
       w = 12,
       units = "in",
       dpi = 900) # make the image nice and crisp))
```

```{r}
# Carnegie Classification
library(stringi)
library(readxl)

# data from https://carnegieclassifications.acenet.edu/resource/2021-update-public-file/
CC <-
  read_excel(here::here('analysis/data/raw_data/CCIHE2021-PublicData.xlsx'),
              sheet = "Values1")
Basic2021 <-
  read_excel(here::here('analysis/data/raw_data/CCIHE2021-PublicData.xlsx'),
             sheet = "Data1") 
  # remove a bunch of text from uni names to improve our joins

uni_name <- # 547
 jobdata %>%  # 547 rows
  # remove parentheses and their contents
  mutate(name = str_squish(str_replace(name_of_hiring_university,
                            "\\s*\\(.*?\\)$", 
                            ""))) %>% 
  mutate(name = str_replace(name,
                            "California State University,[[:space:]]",
                            "California State University-")) %>% 
  left_join(Basic2021, 
            keep = TRUE ) 

# how many schools did we match with the CC data
hm_schools_match <- 
uni_name %>% 
  filter(!is.na(basic2021)) %>% 
  nrow() 

# which schools don't match with the CC data?
no_match <- 
uni_name %>% 
  select(name.x, name.y)  %>% 
  filter(is.na(name.y)) %>% 
  distinct() 

uni_name_tally <- 
uni_name %>% 
  left_join(CC,
            join_by("basic2021" == "Value")) %>% 
  group_by(Category) %>% 
  tally(sort = TRUE) %>% 
  drop_na()

p_c <- 
uni_name_tally %>% 
  mutate(Category = str_wrap(Category, width = 30)) %>% 
ggplot() +
  aes(reorder(Category, n), n) +
  geom_col() +
  coord_flip() +
  xlab("") +
  theme_minimal(base_size = 14)

library(cowplot)
p_map_c <- 
ggdraw(p_c) +
  draw_plot(p_map, .4, .1, .65, .65) +
  draw_plot_label(
    c("A", "B"),
    c(0, 0.45),
    c(1, 0.65),
    size = 12
  )

# save this as SVG, then edit by hand to position the numbers on the
# map nicely, then export that hand-edited SVG as a png to show in the
# paper 
ggsave(here("analysis",
            "figures", 
            "fig-map-and-carnegie-classification.svg"),
       plot = p_map_c,
       bg ="white",
       h = 7, # experiment with h and w to get the right size and proportion
       w = 12,
       units = "in",
       dpi = 900) # make the image nice and crisp))

```

```{r}
#| label: fig-show-map-of-hiring-institution-and-cc
#| fig-cap: "A: Frequency of hiring institution by Carnegie classification. B: Inset shows map of the United States showing the count of tenure-track job ads posted by all insititutions in each state during 2013 -- 2023"

# show figure from PNG file, this is after hand edits to place the
# numbers on the map nicely
knitr::include_graphics(here("analysis",
            "figures",
            "fig-map-and-carnegie-classification-hand-edit.png"))
```

Panel A of @fig-show-map-of-hiring-institution-and-cc shows the frequencies of hiring institutions according to their Carnegie Classification, a framework for classifying US colleges and universities according to the types of degrees awarded, levels of research activity, and topical foci [@shulman2001carnegie]. Doctoral universities with high and very high research activity are by far the most active institutions hiring archaeology faculty. Associate's colleges, also known as community colleges, rarely post job ads for archaeology faculty.

Panel B of @fig-show-map-of-hiring-institution-and-cc shows the geographic distribution of the hiring institutions. California posted almost twice as many job ads as the next most active states. After California, the states that posted the most ads during 2013-2023 include New York, Texas, Pennsylvania, and Florida. These top five states correspond to the top five most populous US states, suggesting that rates of hiring are approximately proportional to population density. The top five states for job ads are also the five states with highest number of degrees awarded in Anthropology [@IPEDSNCES]. Similarly, the lowest counts of job ads were observed in states with the lowest populations: North Dakota, South Dakota, Alaska, and Nebraska. No institutions in Montana posted a job ad during this period. The implication here is that job-seekers who are able to relocate to populous areas will have more employment options.

## Geographic trends in job ads over time

```{r}
#| label: fig-geographic-focus-by-year 

# geographic focus by year

library(stringi)

geographic_foci <-
  read_csv(here("analysis/data/raw_data/Tenure Track Job Advertisements in Archaeology - geography.csv"))

geographic_foci_clean <-
  map(
   str_split(geographic_foci$`From the data`, ";"),
   ~.x %>%
     str_squish() %>%
     stri_remove_empty())

jobdata_geo <-
  jobdata %>%
  select(geographic_focus_of_position)

jobdata_geo <-
  # add one column for each geo region in our categories
cbind(jobdata_geo,
      setNames( lapply(geographic_foci$Category2, function(x) x=NA),
                geographic_foci$Category2) )

for(i in 1:length(geographic_foci$Category2)){

  this_location <- geographic_foci$Category2[i]

  # create the pattern to search for
  x <- paste0(geographic_foci_clean[[i]], collapse = "|")

  # do the search through all the job ads for that pattern
  y <- str_detect(jobdata_geo$geographic_focus_of_position,
             x)

  # assign back to our data frame in the appropriate location column
  jobdata_geo[, this_location] <- y

}

united_states_regions <-
str_subset(geographic_foci$Category2, "US")

jobdata_geo_year <-
jobdata %>%
  bind_cols(jobdata_geo) %>%
  select(year_ad_posted,
         geographic_foci$Category2) %>%
  pivot_longer(-year_ad_posted) %>%
  drop_na()

# how many times each location mentioned?
p_locations <- 
jobdata_geo_year %>%
  group_by(name) %>%
  summarise(n = sum(value)) %>%
  arrange(desc(n)) %>%
  ggplot() +
  aes(reorder(name, n),
      n)+
  geom_col() +
  xlab("") +
  theme_minimal() +
  coord_flip()

# explore trends over time. put a point on the max year
jobdata_geo_year_tally <-
jobdata_geo_year %>%
 # exclude those with <20 ads
  filter(!name %in% c("Canada & Arctic",
                      "Oceania",
                      "Southeast US",
                      "Southwest US",
                      "Western US",
                      "Midwest US",
                      "Northeastern US"
                      )) %>%
  group_by(year_ad_posted,
           name) %>%
  summarise(n = sum(value)) %>%
  mutate(prop = n / sum(n)) %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", 
                                            "–\n")) # en-dash

jobdata_geo_year_tally_max <-
  jobdata_geo_year_tally %>%
  group_by(name ) %>%
  filter(prop == max(prop))

library(ggrepel)

p_geo_year <- 
ggplot() +
  geom_jitter(data =  jobdata_geo_year_tally,
              alpha = 0.3, size = 4,
            aes(year_ad_posted_break,
                 prop,
                 group = name,
                 colour = name)) +
  geom_smooth(data =  jobdata_geo_year_tally,
            aes(year_ad_posted_break,
                 prop,
                 group = name,
                 colour = name),
            linewidth = 3,
           se = FALSE 
           ) +
  xlab("") +
  ylab("Proportion of all ads") +
  scale_colour_brewer(palette = "Dark2") +
  guides(colour = guide_legend("Geographic\nfocus",
                               label.position = "bottom")) +
    theme_minimal( base_size = base_size) +
  theme(legend.position="bottom") 

p_geo <- 
plot_grid(p_locations, 
          p_geo_year,
          ncol = 1,
          rel_heights =  c(0.5, 1.5),
          labels = "AUTO")

ggsave(here("analysis",
            "figures", 
            "fig-geo-focus-by-year.png"),
       bg ="white",
       h = 10, # experiment with h and w to get the right size and proportion 
       w = 8,
       units = "in",
       dpi = 900) # make the image nice and crisp)


# what about within the US, how many times each location mentioned?
p <- 
jobdata_geo_year %>%
  group_by(name) %>%
  summarise(n = sum(value)) %>%
  arrange(desc(n)) %>%
  filter(name %in% united_states_regions) %>% 
  ggplot() +
  aes(reorder(name, n),
      n)+
  geom_col() +
  ylab("Number of ads") +
  xlab("") +
  theme_minimal(base_size = 24) +
  coord_flip()
```

```{r}
#| label: fig-show-geo-trends
#| fig-cap: "A: Frequency of locations mentioned in the text of the job ads. B: Popularity of locations in job ads over time for locations that appear in 20 or more ads. Individual data points are shown, overlain by a locally weighted regression line for each location to indicate temporal trends."

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures",
            "fig-geo-focus-by-year.png"))
```

We recorded all geographic regions mentioned in the text where the successful applicant should have expertise and be research active. Our analysis focuses on those locations mentioned in 20 or more ads. Overall, American locations dominate. Panel A of @fig-show-geo-trends shows that a single region of the US, the Southwest, occurs in more job ads than every other part of the world except for the Mediterranean. The Southwest includes Arizona and New Mexico, with portions of California, Colorado, Nevada, Oklahoma, Texas, and Utah. It is archaeologically significant as the home of the Ancestral Pueblo, Hohokam, and Mogollon peoples, who practiced irrigation agriculture and lived in relatively large settlements compared to other regions of the US. The area was later occupied by the Navajo, Ute, Southern Paiute, Hopi and Zuni, groups who had similarly high population densities [@griffin2000native]. The Mediterranean is prominent because it is the region that is often mentioned in job ads focused on classical archaeology (i.e. archaeology of Bronze Age and Iron Age Italy and Greece).

Demand for jobs focusing on the Americas has been generally high over the past decade, with a peak in 2019-2020 and a subsequent decrease. Demand for jobs focusing on Africa was very low until 2019-2020, peaking in 2020-2021. The proportion of ads with a geographic focus on the Mediterranean has varied substantially, peaking in 2016 and experiencing a nadir in 2019, showing an inverse pattern to the Americas. Asia and India, the Near East, and Europe <!--crying face emoji BM: sorry! --> rarely occur as a geographical focus in job ads at US institutions. Asia and India, Africa, and the Americas appear correlated with each other, while the Near East and Mediterranean are inversely correlated in an opposite trend.

## Method trends in job ads over time

```{r}
# method focus by year

library(stringi)

method_foci <-
  read_csv(here("analysis/data/raw_data/Tenure Track Job Advertisements in Archaeology - method.csv"))

method_foci_clean <-
  map(
    str_split(method_foci$`From the data`, ";"),
    ~.x %>%
      str_squish() %>%
      stri_remove_empty() %>%
      str_to_lower)

jobdata_method <-
  jobdata %>%
  select(methods_focus_of_position) %>%
  mutate(methods_focus_of_position = str_to_lower(methods_focus_of_position))

jobdata_method <-
  # add one column for each topic in our categories
  cbind(jobdata_method,
        setNames( lapply(method_foci$Category, function(x) x=NA),
                  method_foci$Category) )

for(i in 1:length(method_foci$Category)){

  this_method <- method_foci$Category[i]

  # create the pattern to search for
  x <- paste0(method_foci_clean[[i]], collapse = "|")

  # do the search through all the job ads for that pattern
  y <- str_detect(jobdata_method$methods_focus_of_position,
                  x)

  # assign back to our data frame in the appropriate location column
  jobdata_method[, this_method] <- y

}

jobdata_method_year <-
  jobdata %>%
  bind_cols(jobdata_method) %>%
  select(year_ad_posted,
         method_foci$Category) %>%
  pivot_longer(-year_ad_posted) %>%
  drop_na()  %>% 
  mutate(name = case_when(
    name == "Computational and Digital archaeology" ~ "Computational and\ndigital archaeology",
    name == "Material culture analysis" ~ "Material culture\nanalysis",
    .default = name))  

# how many times each topic mentioned?
p_method <- 
jobdata_method_year %>%
  group_by(name) %>%
  summarise(n = sum(value)) %>%
  arrange(desc(n)) %>%
  ggplot() +
  aes(reorder(name, n),
      n)+
  geom_col() +
  xlab("") +
    theme_minimal(base_size = base_size) +
  theme(axis.text.y  = element_text(size = 7)) +
  coord_flip()

# explore trends over time. put a point on the max year
jobdata_method_year_tally <-
  jobdata_method_year %>%
  # exclude those with <20 ads
  filter(!name %in% c("Material culture\nanalysis",
                      "Ceramic analysis"
  )) %>%
  group_by(year_ad_posted,
           name) %>%
  summarise(n = sum(value)) %>%
  mutate(prop = n / sum(n)) %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", "-\n"))

library(ggrepel)

p_method_trend <- 
ggplot() +
    geom_jitter(data =  jobdata_method_year_tally,
              alpha = 0.3, size = 4,
            aes(year_ad_posted_break,
                 prop,
                 group = name,
                 colour = name)) +
  geom_smooth(data =  jobdata_method_year_tally,
            aes(year_ad_posted_break,
                prop,
                group = name,
                colour = name),
            size = 3,
            se = FALSE) +
  xlab("Year") +
  ylab("Proportion of all ads") +
  guides(colour = guide_legend("Method\nfocus",
                               label.position = "bottom")) +
    theme_minimal( base_size = base_size) +
  scale_colour_brewer(palette = "Dark2") +
  theme(legend.position="bottom") 

p_meth <- 
plot_grid(p_method, 
          p_method_trend,
          ncol = 1,
          rel_heights =  c(0.5, 1.5),
          labels = "AUTO")

ggsave(here("analysis",
            "figures", 
            "fig-method-focus-by-year.png"),
       plot = p_meth, 
       bg ="white",
       h = 10, # experiment with h and w to get the right size and proportion
       w = 8,
       units = "in",
       dpi = 900) # make the image nice and crisp))
```

```{r}
#| label: fig-show-metho-trends
#| fig-cap: "A: Frequency of methods mentioned in the text of the job ads. B: Popularity of methods in job ads over time for methods that appear in 10 or more ads. Individual data points are shown, overlain by a locally weighted regression line for each location to indicate temporal trends."

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures",
            "fig-method-focus-by-year.png"))
```

Landscape archaeology, encompassing GIS and remote sensing, has remained prominent compared to other methods [@fig-show-metho-trends]. The popularity of this suite of skills may reflect its demand by employers in the Cultural Research Management (CRM) sector. @morganReadyNotArchaeological2023 found that almost one-third of 599 jobs ads posted by CRM employers sought candidates with experience in GIS. Methods focused on a specific element of the archaeological record, such as Lithic analysis, Zooarchaeology and Ceramics are among the least frequently mentioned in job ads. Instead, more popular methods are those that are relevant to multiple elements of the archaeological record (e.g. Archaeobotany encompasses macroscopic and microscopic plant remains; Bioarchaeology often includes skeletal analysis, isotopes, proteins, etc.).

Landscape archaeology, although dominant, has fluctuated over the years and has been on a downtrend since 2018-2019. Computational and Digital archaeology is the second most represented method, showing an overall increasing trend, particularly since 2020-2021. Archaeobotany shows a strong cyclical trend, rising, falling, and then rising again over our study period. Archaeometry and Geoarchaeology have maintained a relatively low but steady presence in job ads, peaking in 2017-2018 and 2018-2019 and declining thereafter. Lithic analysis and Zooarchaeology are also mentioned relatively infrequently in job ads and show an inverse correlation with each other after 2018-2019.

## Topic trends in job ads over time

```{r}

# topical focus by year
library(stringi)

topical_foci <-
  read_csv(here("analysis/data/raw_data/Tenure Track Job Advertisements in Archaeology - topic.csv"))

topical_foci_clean <-
  map(
    str_split(topical_foci$`From the data`, ";"),
    ~.x %>%
      str_squish() %>%
      stri_remove_empty() %>%
      str_to_lower)

jobdata_topic <-
  jobdata %>%
  select(topical_focus_of_position) %>%
  mutate(topical_focus_of_position = str_to_lower(topical_focus_of_position))

jobdata_topic <-
  # add one column for each topic in our categories
  cbind(jobdata_topic,
        setNames( lapply(topical_foci$Category, function(x) x=NA),
                  topical_foci$Category) )

for(i in 1:length(topical_foci$Category)){

  this_topic <- topical_foci$Category[i]

  # create the pattern to search for
  x <- paste0(topical_foci_clean[[i]], collapse = "|")

  # do the search through all the job ads for that pattern
  y <- str_detect(jobdata_topic$topical_focus_of_position,
                  x)

  # assign back to our data frame in the appropriate location column
  jobdata_topic[, this_topic] <- y

}

jobdata_topic_year <-
  jobdata %>%
  bind_cols(jobdata_topic) %>%
  select(year_ad_posted,
         topical_foci$Category) %>%
  pivot_longer(-year_ad_posted) %>%
  drop_na() %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", 
                                            "–\n")) # en-dash

# how many times each topic mentioned?
p_topic <- 
jobdata_topic_year %>%
  group_by(name) %>%
  summarise(n = sum(value)) %>%
  arrange(desc(n)) %>%
  ggplot() +
  aes(reorder(name, n),
      n)+
  geom_col() +
  xlab("") +
  theme_minimal() +
  coord_flip()

# explore trends over time. put a point on the max year
jobdata_topic_year_tally <-
  jobdata_topic_year %>%
  # exclude those with <20 ads
  filter(!name %in% c("Digital Archaeology",
                      "Digital archaeology",
                      "Pleistocene archaeology",
                      "Mesoamerican Archaeology",
                      "Bioarchaeology",
                      "Archaeological theory",
                      "Evolutionary anthropology",
                      "North American archaeology"
  )) %>%
  group_by(year_ad_posted,
           name) %>%
  summarise(n = sum(value)) %>%
  mutate(prop = n / sum(n))  %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", 
                                            "–\n")) # en-dash

jobdata_topic_year_tally_max <-
  jobdata_topic_year_tally %>%
  group_by(
    name ) %>%
  filter(prop == max(prop)) 

library(ggrepel)

p_topic_trend <- 
ggplot() +
      geom_jitter(data =  jobdata_topic_year_tally,
              alpha = 0.3, size = 4,
            aes(year_ad_posted_break,
                 prop,
                 group = name,
                 colour = name)) +
  geom_smooth(data =  jobdata_topic_year_tally,
            aes(year_ad_posted_break,
                prop,
                group = name,
                colour = name),
            size = 3,
            se = FALSE) +
  xlab("Year") +
  ylab("Proportion of all ads") +
  scale_colour_brewer(palette = "Dark2") +
  guides(colour = guide_legend("Topic\nfocus",
                               label.position = "bottom")) +
    theme_minimal( base_size = base_size) +
  theme(legend.position="bottom") 

p_topi <- 
plot_grid(p_topic, 
          p_topic_trend,
          ncol = 1,
          rel_heights =  c(0.5, 1.5),
          labels = "AUTO")

ggsave(here("analysis",
            "figures", 
            "fig-topic-focus-by-year.png"),
       plot = p_topi, 
       bg ="white",
       h = 10, # experiment with h and w to get the right size and proportion
       w = 8,
       units = "in",
       dpi = 900) # make the image nice and crisp))
```

```{r}
#| label: fig-show-topi-trends
#| fig-cap: "A: Frequency of topics mentioned in the text of the job ads. B: Popularity of topics in job ads over time for topics that appear in 20 or more ads. Individual data points are shown, overlain by a locally weighted regression line for each location to indicate temporal trends."

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures",
            "fig-topic-focus-by-year.png"))
```

The most frequently mentioned topic in this sample of job ads is Environmental archaeology [@fig-show-topi-trends]. This category encompasses such phrases as human-environmental dynamics, interaction between humans and their environments, environmental change, climate change, historical ecology, ecological knowledge, human ecology, and ecological systems. Public archaeology is the second most frequent topic overall; this category included phrases such as cultural resource management, cultural heritage, heritage studies, museum studies, human rights, community engaged, historic preservation, social justice, community-based, repatriation, and community-engaged archaeology. The least common topics in our sample are Pleistocene archaeology (e.g. human origins, hunter-gatherer archaeology) and Digital archaeology.

The years 2019-2020 and 2020-2021 show striking changes in the popularity of topics in job ads. Indigenous and historical archaeology (which includes archaeology of the African diaspora and enslaved people) became the most popular topic at this time, rising from being one of the least popular topics from 2012-2017. Conversely, archaeological science, which was popular during 2012-2017, was rarely mentioned in job ads during 2019-2021. Ancient Europe and the Mediterranean, an infrequently mentioned topic for the entire study period, virtually disappeared from job ads during 2019-2021. Mentions of Complex societies in ads decrease at a steady rate, while mentions of public archaeology consistently increase over the study period. The topic of Environmental Archaeology remains high over time.

```{r}
#| label: richness-in-ads

# geo co-occurance
jobdata_geom_cooc <- 
  jobdata_geo %>% 
  select(-geographic_focus_of_position) %>% 
  drop_na()  %>% 
  mutate_all(as.numeric)

# topic co-occurance
jobdata_topic_cooc <- 
jobdata_topic %>% 
  select(-topical_focus_of_position) %>% 
  drop_na()  %>% 
  mutate_all(as.numeric)

# method co-occurance
jobdata_method_cooc <- 
  jobdata_method %>% 
  select(-methods_focus_of_position) %>% 
  drop_na()  %>% 
  mutate_all(as.numeric)

kw_test_richness_input <- 
map(
  list(jobdata_topic_cooc,
       jobdata_method_cooc,
       jobdata_geom_cooc),
  ~rowSums(.x)) %>% 
  imap(~ data.frame(group = .y, value = .x)) %>%
  bind_rows() 

kw_test_richness <- 
  kruskal.test(kw_test_richness_input, 
               value ~ group)

# from https://stackoverflow.com/a/61758180/1036500 for pretty printing
expSup <- function(w, digits=0) {
  sprintf(paste0("%.", digits, "f*x*10^%d^"), w/10^floor(log10(abs(w))), floor(log10(abs(w))))
}
```

```{r}
# plot topic co-occurance

# Calculate co-occurrence matrix
cooccurrence_matrix <- t(jobdata_topic_cooc) %*% as.matrix(jobdata_topic_cooc)

# Convert to a tidy format for easy inspection and manipulation
cooccurrence_tidy <- as.data.frame(as.table(as.matrix(cooccurrence_matrix)))

# Rename the columns for better readability
colnames(cooccurrence_tidy) <- c("Variable1", "Variable2", "Cooccurrence")

# View the top co-occurring variable pairs
cooccurrence_tidy_df <- 
cooccurrence_tidy %>%
  filter(Variable1 != Variable2) %>%  # Exclude diagonal (self-co-occurrence)
  filter(as.numeric(Variable1) < as.numeric(Variable2)) %>% 
  arrange(desc(Cooccurrence)) %>% 
  drop_na()

library(viridis)

# Plot heatmap of co-occurrence matrix
p_coo <- 
ggplot(cooccurrence_tidy_df, 
       aes(Variable1, Variable2, fill = Cooccurrence)) +
  geom_tile() +
  scale_fill_viridis(option = "viridis") +
  theme_minimal(base_size  = base_size) +
  guides(fill = guide_colorbar(title.position = "top")) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        axis.text.y = element_text(angle = 45, hjust = 1),
        legend.position = c(.7,.2),
        legend.direction = "horizontal") +
  coord_equal() +
  labs(x = "", y = "") 

ggsave(here("analysis",
            "figures", 
            "fig-topic-cooc-heatmap.png"),
       plot = p_coo, 
       bg ="white",
       h = 8, # experiment with h and w to get the right size and proportion
       w = 8,
       units = "in",
       dpi = 900) # make the image nice and crisp))

```

```{r}
#| label: fig-show-cooc
#| fig-cap: "Heatmap of topic co-occurrance in job ads."

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures",
            "fig-topic-cooc-heatmap.png"))
```

In our sample, job ads were more topically rich than geographically or methodologically rich. That is, ads were more likely to mention multiple topics than they were to mention multiple methods or geographic locations. A Kruskal-Wallis test indicated significantly higher richness in topics compared to richness of geographic locations or methods in job ads (χ2 (df = `r unname(kw_test_richness$parameter)`, N = `r nrow(kw_test_richness_input)`) = `r round(unname(kw_test_richness$statistic), 2)`, p = `r expSup(unname(kw_test_richness$p.value))`). @fig-show-cooc shows topic co-occurrences in our sample. Indigenous and historical archaeology often occurs in job ads with Public archaeology and North American archaeology. Complex societies and Environmental archaeology were frequently found in the same ads. Bioarchaeology, Archaeological science, and Evolutionary archaeology are another cluster of topics that frequently co-occur. Other topics are relatively isolated. For example, Pleistocene archaeology and Digital archaeology rarely occur with other topics.

## Instructions to applicants over time

```{r}
#| label: requirements-over-time

# look at only these requirements because the others are flat

intresting_requirements <- 
c("cover letter",
  "cv",
  "names of recommenders",
  "diversity statement",
  "research statement",
  "teaching statement")

jobdata_requirements <- 
jobdata %>% 
  select(year_ad_posted,
         starts_with("documents_requested")) %>% 
  pivot_longer(-year_ad_posted) %>% 
  mutate(value = case_when(
    value == "Not requested in the job ad" ~ 0,
    value == "One" ~ 1,
    value == "Two (e.g. two syllabi)" ~ 2,
    value == "Three" ~ 3,
    .default = 0
  ))  %>% 
  # trim names a bit
  mutate(name = str_remove(name, "documents_requested_")) %>% 
  mutate(name = str_replace_all(name, "_", " ")) %>% 
  filter(name %in% intresting_requirements) %>% 
  mutate(name = str_wrap(name, 30),
         year_ad_posted = str_replace(year_ad_posted, "-", "\n")) %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", "-\n"))

jobdata_requirements_means <- 
jobdata_requirements %>% # average number requested per year
  group_by(year_ad_posted, 
           name) %>% 
  summarise(mean_n = mean(value)) %>% 
  # add line break for prettier plotting
  mutate(year_ad_posted_break = str_replace(year_ad_posted, "-", 
                                           "–\n")) # en-dash

integer_breaks <- function(n = 5, ...) {
  fxn <- function(x) {
    breaks <- floor(pretty(x, n, ...))
    names(breaks) <- attr(breaks, "labels")
    breaks
  }
  return(fxn)
}

p_req <- 
jobdata_requirements %>%
  mutate(name = case_when(
    name == "cover letter" ~ "Cover letter",
    name == "cv" ~ "CV",
    name == "research statement" ~ "Research statement",
    name == "teaching statement" ~ "Teaching statement",
    name == "diversity statement" ~ "Diversity statement",
    name == "names of recommenders" ~ "Names of recommenders")) %>%
  ggplot() +
  aes(year_ad_posted_break,
      fill = factor(value),
      group = factor(value)) +
  geom_bar(stat="count",
           position = "fill") +
  facet_wrap(~name,
             scales = "free_y",
             nrow = 2) +
  xlab("") +
  ylab("Proportion of all job ads in a year") +
  scale_y_continuous(breaks = integer_breaks()) +
  theme_minimal(base_size = base_size) +
  scale_fill_brewer(palette = "Dark2") +
  guides(fill = guide_legend("Count")) +
  theme(axis.text.x = element_text(size = 8),
        strip.text = element_text( size = 14))


ggsave(filename = here("analysis",
            "figures", 
            "fig-requirements-per-year.png"),
       plot = p_req,
       bg ="white",
       h = 6, # experiment with h and w to get the right size and proportion 
       w = 12,
       units = "in",
       dpi = 900) # make the image nice and crisp
  
```

```{r}
#| label: fig-requirements-over-time
#| fig-cap: "Changing requirements in job ads over time. 'Count' refers to the number of each item required."

# show figure from PNG file
knitr::include_graphics(here("analysis",
            "figures",
            "fig-requirements-per-year.png"))
```

Over our ten year study period there have been substantial changes in the instructions to applicants in terms of the type and number of documents that are requested by the search committees [@fig-requirements-over-time]. Requests for cover letter and CV decline slightly in more recent years, perhaps reflecting their status as a generic and expected component to submit without needing to be specifically requested. The requirement for a diversity statement is rare until 2019-2020, peaks around 2020-2021, then decreases towards the present. Requests for names of recommenders (either zero or three names, rarely only two names) reaches a maximum during 2019-2020, then also decline for the remainder of the study period. The requirement for a research statement and teaching statement increases after 2015-2016, and becomes more frequent in job ads in more recent years. Requests for course descriptions, syllabus samples, teaching evaluations, transcripts and writing samples are consistently low over time (not shown here).

# Discussion

Our study of a decade of tenure-track job ads in archaeology in the US reveals diverse dynamics in the demand for specialisations in topics, methods and geographic focus, and in the instructions to applicants. While these dynamics are familiar to scholars actively seeking faculty positions, we believe this is the first time they have been quantified at such a large scale within archaeology. Trends in job ads reflect broader shifts in intellectual and practical priorities concerning archaeology, undergraduate education, and the process of hiring professors. The demand for archaeology faculty, indicated by the total number of tenure-track jobs, may be affected by a variety of factors.

Overall, we found more tenure-track jobs advertised each year than non-tenure-track, with the exception of 2013-2014. The wiki’s emphasis on tenure-track jobs runs counter to well-established patterns in the academic job market, wherein short-term and contingent positions are fast outpacing "the last good job[s] in America" [@aronowitz2001]. Research across anthropological sub-fields has shown that the number of tenure-track positions advertised within the discipline has also declined. Analyzing the job ads posted in *Anthropology News* in 1999–20000 versus 2019–2020, for example, Gershon and Rachok [-@HelloTristesTropes2021] found that the number of tenure-track positions decreased by 25% between their two time slices. Similarly, in his examination of jobs ads posted on the Biological Anthropology Academic Job Wiki between 2010–2017, Passalacqua noted that approximately one quarter of the 474 ads posted were for adjunct or visiting staff [@Passalacqua_2018, pp.773]. Though Passalacqua did not examine how the proportion of job types changed over time, he did underscore "a current diverging trend of decreasing academic job advertisements and increasing doctoral degrees in biological anthropology which could result in serious consequences for the discipline" [-@Passalacqua_2018, pp.773]. Such observations have a surprising longevity. Rogge raised the alarm nearly half a century ago, warning of the "maladaptive" consequences of the exponential rate of disciplinary growth and impending consequences for job seekers [@rogge1976, pp.839]. The dwindling number of permanent academic positions is not a trend unique to anthropology—as of 2019, the AAUP documented a 36% increase in contingent positions over the preceding 15 years (AAUP 2022), and as of 2022, contingent positions make up more than half of faculty positions in the United States [@colby2022annual] .

This discrepancy in our data set—wherein advertisements for tenure-track positions dominate the wiki despite their increasing rarity in larger market—may be due to several factors. The first involves the more limited circulation of advertising for short-term positions relative to advertising for tenure-track jobs. Many of these short-term positions are not advertised nationally, but are instead disseminated through local email lists and are filled by people close to the hiring department, such as recently graduated students. A second factor is bias in our data—with most Wiki users likely seeking a tenure-track job, non-tenure-track jobs may have been less frequently added to the Academic Jobs Wiki because they were peripheral to the goal of most users. This bias limits the reliability of our results on the ratio of tenure-track to non-tenure-track positions. Tellingly, Passalacqua’s examination of a similar wiki over a seven-year span showed a similar dominance of permanent positions—291/474 (63%) were for tenure-track hires at various levels (2018: Table 2). This suggests that these patterns are a reflection of the wiki, rather than the market itself. <!--JB MAYBE ADD A NOTE HERE FROM A CRISIS PAPER, PERHAPS MELISSA'S, ABOUT DISPARITY IN TRAINING AND APPLIED ANTHROPOLOGY. BM: [inserting earplugs] GO FOR IT! -->

The downward trend in tenure-track positions during 2013-2019 may be related to declining undergraduate enrollment in anthropology since 2013 [@crambChangingProfileTenureTrack2022a]. The big dip during 2020-2021 is explained by the hiring freezes at many institutions resulting from the COVID-19 pandemic, which caused extreme disruption and uncertainty as universities focused on adapting to online instruction and assessment in an effort to minimize the spread of the virus [@woolstonJuniorResearchersHit2020]. A survey of early career researchers in archaeology captures the impact of this dip, with three-quarters of respondents experiencing negative impacts on their careers due to the pandemic [@bramiPrecariousFutureReflections2023]

The 2019-2021 period was also a major inflection point in the popularity of specific topics and regions in job ads. Calls for positions incorporating Indigenous and historical archaeology, and archaeology of the Americas, became far more frequent at this time, while Archaeological science, Complex societies, and the Mediterranean and Near East showed declines in popularity. Similarly, the number of job ads with a geographic focus on the Americas and Africa peaks during 2019–2021. These shifts in the topical and geographic foci of job ads were likely influenced by broader cultural movements such as Black Lives Matter, protests about racial injustice, and efforts to amplify Indigenous voices [@dunivinBlackLivesMatter2022; @franklinFutureNowArchaeology2020; @flewellenFutureArchaeologyAntiracist2021; @lalukArchaeologySocialJustice2022]. COVID-19 also negatively impacted Black, Indigenous American, and Hispanic communities with significantly higher infection and morbidity rates, drawing attention to racial and socio-economic inequality in the US [@taiDisproportionateImpactCOVID192021; @mackeyRacialEthnicDisparities2021]. The Black Lives Matter movement, dating back to 2013, intersected profoundly with the pandemic and the murder of George Floyd in Minneapolis by a police officer in May 2020, three months after the World Health Organization declared COVID-19 to be a pandemic. Mass protests objecting to Floyd's murder generated widespread concern about racial inequities and stimulated a broad interest in addressing systemic racial injustice.

Our data suggest that archaeology faculty at US universities participated in this movement by adjusting their hiring plans to prioritize recruiting archaeologists working on topics relevant to Black and Indigenous communities. Many universities may have hoped to hire Black and Indigenous archaeologists as part of their effort to tackle systemic racism. Due to the 1964 Civil Rights Act which prohibits hiring based solely on race or ethnicity, however,it is illegal in the US for universities use race or ethnicity as a primary factor in hiring. As a result, universities appear to have tailored the content of their job ads to focus on topics where they expected Black and Indigenous researchers to be most numerous, in an effort to ensure that these researchers would be well-represented in the pool of applicants.

This striking change in topics and geographic foci of 2019-2021 occurred against a backdrop of several longer-term trends. Over the course of the study period, we document a gradual decline in topics such as Complex societies and Archaeological science, the geographic foci of Mesoamerica and South America, and methods relating to Landscape archaeology. These trends are harder to explain as we cannot link their origins to a historical event such as the COVID-19 pandemic. We might speculate that a growing preference for archaeological approaches that privilege agency-driven, relational perspectives, in combination with human subjectivity and cultural framing, is one enduring legacy of debates in the 1980s and 90s about processualism versus post-processualism [@hodderArchaeologicalProcessIntroduction1999; @johnson2019archaeological; @Fogelin2019] <!--Should we cite Cate Frieman here? BM: grimace emoji -->. This theoretical trend might explain why archaeological science is showing a decline, as demand for methods for analyzing artefact materiality, ontology, and power displace physical laboratory methods for technological, functional, and compositional analyses. Other factors relevant to this decline may include increasing difficulty of obtaining research funding to support archaeological science research, such as laboratory facilities and instrumentation. A decline in interest in the archaeology of complex societies may reflect several themes that intersect with broader social changes, such as growing interest in Indigenous and non-state actors in the past and an increased concern with climate change, environmental sustainability, and resilience, shifting attention away from the study of monumental architecture, elite societies, political hierarchies, and state systems.

```{r}
schools_that_dropped_ds_req <-     
  jobdata %>% 
  dplyr::select(
    year_ad_posted,
    name_of_hiring_university, 
    documents_requested_diversity_statement) %>% 
  mutate(ds = case_when(
    documents_requested_diversity_statement == "Not requested in the job ad" ~ FALSE,
    documents_requested_diversity_statement != "Not requested in the job ad" ~ TRUE
  )) %>% 
    group_by(name_of_hiring_university) %>%
    mutate(year = parse_number(str_sub(year_ad_posted, 1, 4))) %>% 
    ungroup() %>% 
    arrange(name_of_hiring_university, desc(year))  %>% 
    group_by(name_of_hiring_university) %>% 
    filter(n() >= 2) %>% 
    select(name_of_hiring_university,
           year,
           documents_requested_diversity_statement) %>% 
    mutate(documents_requested_diversity_statement = 
             ifelse(documents_requested_diversity_statement == "One", "1", "0"),
           documents_requested_diversity_statement = parse_number(documents_requested_diversity_statement)) %>% 
    pivot_wider(names_from = year,
                values_from = documents_requested_diversity_statement,
                values_fn = ~sum(.x, na.rm = TRUE)) %>% 
    filter(`2022` == "0") %>% 
   rowwise() %>% 
    mutate(prev_req_ds = sum(across(c(`2015`, `2016`, `2017`, `2018`, `2019`, `2020`, `2021`)), 
                                 na.rm = TRUE)) %>% 
    select(name_of_hiring_university, 
           `2022`,
           prev_req_ds) %>% 
    arrange(desc(prev_req_ds))

n_schools_that_dropped_ds_req <- 
  schools_that_dropped_ds_req %>% 
  filter(prev_req_ds == 1) %>% 
  nrow()


```

Our data on the requirements for applicants support prior findings that the complexity of applications—and concomitantly, the labor required to apply for tenure-track jobs—has gradually increased over time. This trend is especially pronounced for Assistant Professor positions, which make more demands on applicants than Associate and Full Professor positions. Consistent with results from other studies [@HelloTristesTropes2021], our project documented a growing demand for research and teaching statements. Demand for diversity statements shows a unique trajectory, peaking in 2020-2021 and declining into the present. This may relate to the intersecting concerns about race, identity and class inequalities emerging during the COVID-19 pandemic, which seem to have reached a peak in 2020-2021 and then declined over time, resulting in jettisoning requests for diversity statements as the most urgent period of the pandemic moves into the past. Another factor here may be the debates surrounding the experiment with diversity statements in hiring at some UC campuses during 2016-2022. Universities that previously required a diversity statement dropped that requirement after 2022 [@guidenAreDiversityStatements]. In our data we observed a reversal of the diversity statement requirement at `r n_schools_that_dropped_ds_req` universities. Those schools posted job ads prior 2022 that did require a diversity statement and also posted an ad in 2022 that did not require one.

One bright spot for applicants is the decline in requests for names of recommenders in the initial application in recent years. This may be a response to recent criticisms of the burden on the applicant of preparing numerous complex job applications [e.g. @dennisWorstAnthroJob2022]. In recognition of this burden, not only on applicants but also on colleagues writing letters of recommendation over and over to support applicants, many hiring committees now follow the recommendations of @dennisWorstAnthroJob2022 in only requesting names and letters of recommendation at later stages of the hiring process, if at all. Showing sensitivity to this burden, in 2020 the American Anthropological Association issued guidance to academic departments that letters of recommendation should not be requested in the initial application, but should only be required from short-listed candidates[@jobboar2020; @Youngling2020].

A key limitation of our research is that it does not include an analysis of the academic profiles of those who were eventually hired based on this sample of job ads. Our results reveal collective aspirations for the future of the field, but only from those writing the job ads, typically faculty who are securely employed as tenured professors serving on hiring committees at US colleges and universities. Our results do not show how these aspirations worked out in the topical and geographic foci of the people who were actually hired for these positions. Future work should consider interviewing faculty hired during our study period to match up scholars with the ads to which they applied. If the successful applicants can be identified, then we could analyze the fit between the details of the job ad and the applicant's research. Such an analysis would allow us to assess how effective job ads are for driving change in the discipline by setting the topics of courses that will be taught in undergraduate and graduate curricula, and research that will be supported by universities. We also recognize the possibility that the Academic Jobs Wiki does not capture all available positions and likely over-represents certain types of institutions. Future work should evaluate these biases by comparing entries on the Wiki to other sources of information about the academic job market, such as the American Anthropological Association's AnthroGuide, or data collected directly from universities.

# Conclusion

Our results show that job ads offer a nuanced record of disciplinary history, documenting shifting trends in topics, methods, and geographic foci, with higher chronological resolution than many other sources, such as undergraduate textbooks [@lyman2010american]. The short periods of time spanning the rise and fall of some of the foci we observed have implications for prospective graduate students. A topic that is growing in popularity as a student begins their PhD may have peaked and be in decline before they graduate. Methods seem to have a much lower frequency of change in popularity relative to topical and geographic foci. One possible implication of this finding is that a graduate student who has invested in developing technical expertise in a method during their studies, in addition to a topic and region, might be less vulnerable to the vagaries of the job market than a student without a distinct area of technical expertise.

Jobs ads also demonstrate how archaeologists draw on current events and politics to prioritize topics, regions, and methods in their hiring plans. This result is consistent with prior findings, such @wilk1985ancient's analysis of publications that identified trends in the explanations of the Maya collapse during the 1960s-1970s that corresponded with major contemporary American political and social issues. This continual responsiveness to current events demonstrates that many archaeologists accept that our narratives of the past are entangled in the social and political milieu in which we work. Furthermore, it shows an active effort by archaeologists to take control of interpreting the past.

# Acknowledgements

Thanks to the anonymous contributors to the Academic Jobs Wiki, without whose efforts to collect and organise hundreds of job ads, this paper would not exist. To those of you who contributed to the wiki but did not obtain a tenure-track job, and/or decided to pivot to another industry, we hope this paper shows your time on the wiki was not wasted. Your efforts have helped contribute to more accurate expectation-setting for future generations of archaeologists.

# Data Availability Statement

The data that support the findings of this study are openly available in Zenodo at http://doi.org/xxx/xxx. For peer review the link is: https://zenodo.org/records/14798942?preview=1&token=eyJhbGciOiJIUzUxMiJ9.eyJpZCI6ImMyYWE2MDc3LTMxMzAtNDM1Yi1hYTJkLWMyMGMyNWVhOWMyYiIsImRhdGEiOnt9LCJyYW5kb20iOiJiMjkyMTAyN2UwNzEwNWQ2OWIyZmQ4OTkwMjU0MzY1YyJ9.slnC1BbNgZkiJjrRqmKFK9a1bpI-e9VBbjcU7L5OEeYFs3whcL3POsfVj7phDnoaB5A_6mP9wpGirEaT9Dtvug

# Funding Statement

This research received no specific grant funding from any funding agency, commercial or not-for-profit sectors.

# Competing Interests Statement

Competing interests: The authors declare none

# Supplementary materials

Our supplementary materials are available at http://doi.org/xxx/xxx. For peer review the link is: https://zenodo.org/records/14798942?preview=1&token=eyJhbGciOiJIUzUxMiJ9.eyJpZCI6ImMyYWE2MDc3LTMxMzAtNDM1Yi1hYTJkLWMyMGMyNWVhOWMyYiIsImRhdGEiOnt9LCJyYW5kb20iOiJiMjkyMTAyN2UwNzEwNWQ2OWIyZmQ4OTkwMjU0MzY1YyJ9.slnC1BbNgZkiJjrRqmKFK9a1bpI-e9VBbjcU7L5OEeYFs3whcL3POsfVj7phDnoaB5A_6mP9wpGirEaT9Dtvug

<!-- The following line inserts a page break  -->

\newpage

# References cited

<!-- The following line ensures the references appear here for the MS Word or HTML output files, rather than right at the end of the document (this will not work for PDF files):  -->

::: {#refs}
:::

\newpage

### Colophon

This report was generated on `r Sys.time()` using the following computational environment and dependencies:

```{r}
#| label: colophon
#| cache: false

# which R packages and versions?
if ("devtools" %in% installed.packages()) devtools::session_info()
```

The current Git commit details are:

```{r}
# what commit is this file at? 
if ("git2r" %in% installed.packages() & git2r::in_repository(path = ".")) git2r::repository(here::here())  
```
